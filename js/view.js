var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){!function(t){var e=function(){function t(){}return t.assert=function(t,e){if(void 0===t&&(t=!1),!t)throw e+"\n"+(new Error).stack},t.logstack=function(t){var e=new Error;console.log(t+"\n"+e.stack)},t.log=function(t){console.log(t)},t}();t.Debug=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.graphics.Point,n=function(){function t(){}return t.max=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var a=n[i];isNaN(a)||null==a||e.push(a)}return Math.max.apply(this,e)},t.min=function(t){for(var e=[],i=0,n=t;i<n.length;i++){var a=n[i];isNaN(a)||null==a||e.push(a)}return Math.min.apply(this,e)},t.iskey=function(t){return void 0!==t&&null!==t&&"string"==typeof t&&"_"!=t[0]},t.checkArrayType=function(t){e.Debug.assert(null!=t),e.Debug.assert(t.length>0);for(var i=typeof t[0],n=0,a=t;n<a.length;n++)if(i!=typeof a[n])return!1;return!0},t.getType=function(i){var n=null;if(i instanceof Array){if(e.Debug.assert(null!=i),e.Debug.assert(i.length>0),n=e.DataType.Array,t.checkArrayType(i))return t.getType(i[0])}else"number"==typeof i?n=e.DataType.Number:"string"==typeof i?n=e.DataType.String:"boolean"==typeof i?n=e.DataType.Boolean:e.Debug.assert(!0,"Value can't be Object except Array");return n},t.mergeScale=function(t,i,n){void 0===n&&(n=!1);var a=null;if(t.id==i.id)if(t instanceof e.OrdinalScale&&i instanceof e.OrdinalScale){var r=_.union(t.domains,i.domains);(n||t.domains.length/r.length>.5&&i.domains.length/r.length>.5)&&(a=t.clone()).domain(r)}else if(t instanceof e.LinearScale&&i instanceof e.LinearScale){var o=Math.min(t.min,i.min),s=Math.max(t.max,i.max),l=Math.abs(s-o)/Math.abs(t.max-t.min),c=Math.abs(s-o)/Math.abs(i.max-i.min);console.log("Linear range rate1 = "+l+" , rate2 = "+c),(n||l<10&&c<10)&&(a=t.clone()).domain([o,s])}else t instanceof e.LogScale&&i instanceof e.LogScale&&t.logBase==i.logBase&&(a=t.clone()).domain([Math.min(t.min,i.min),Math.max(t.max,i.max)]);return a},t.isMixedRotatedRect=function(e,i){var n=!1;if(e.angle==i.angle)for(var a=0,r=e.points;a<r.length;a++){var o=r[a];if(t.IsPointInPolygon(o,i.points)){n=!0;break}}else Math.sqrt(Math.pow(e.center.x-i.center.x,2)+Math.pow(e.center.y-i.center.y,2))<=e.raidius+i.raidius&&(n=!0);return n},t.IsPointInPolygon=function(t,e){for(var i=e[0].x,n=e[0].x,a=e[0].y,r=e[0].y,o=1;o<e.length;o++){var s=e[o];i=Math.min(s.x,i),n=Math.max(s.x,n),a=Math.min(s.y,a),r=Math.max(s.y,r)}if(t.x<i||t.x>n||t.y<a||t.y>r)return!1;for(var l=!1,o=0,c=e.length-1;o<e.length;c=o++)e[o].y>t.y!=e[c].y>t.y&&t.x<(e[c].x-e[o].x)*(t.y-e[o].y)/(e[c].y-e[o].y)+e[o].x&&(l=!l);return l},t.IsPointInPolygon2=function(t,e,i){for(var n=e[0],a=e[0],r=i[0],o=i[0],s=1;s<e.length;s++)n=Math.min(e[s],n),a=Math.max(e[s],a),r=Math.min(i[s],r),o=Math.max(i[s],o);if(t.x<n||t.x>a||t.y<r||t.y>o)return!1;for(var l=!1,s=0,c=e.length-1;s<e.length;c=s++)i[s]>t.y!=i[c]>t.y&&t.x<(e[c]-e[s])*(t.y-i[s])/(i[c]-i[s])+e[s]&&(l=!l);return l},t.Area=function(t,e){for(var i=0,n=0;n<t.length;n++)n<t.length-1?i+=t[n]*e[n+1]-t[n+1]*e[n]:i+=t[n]*e[0]-t[0]*e[n];return i/=2},t.CenterOfPolygon=function(t,e){for(var n=0,a=0,r=0,o=1;o<=t.length;o++){var s=t[o%t.length],l=e[o%e.length],c=t[(o-1)%t.length],h=e[(o-1)%e.length],u=(s*h-l*c)/2;n+=u,a+=u*(s+c)/3,r+=u*(l+h)/3}return a/=n,r/=n,new i(a,r)},t}();e.Utility=n}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){var e=function(){function t(){}return t.nextColor=function(){return t.Color[++t._colorindex%t.Color.length]},t.indexColor=function(e){return t.Color[e%t.Color.length]},t.gradientColor=function(e,i,n){var a=null;0==e.indexOf("rgb")&&(e=t.colorHex(e));var r=(a=t.colorRgb(e))[0],o=a[1],s=a[2],l=null;0==i.indexOf("rgb")&&(i=t.colorHex(i));for(var c=((l=t.colorRgb(i))[0]-r)/n,h=(l[1]-o)/n,u=(l[2]-s)/n,_=[],p=0;p<n;p++){var f=t.colorHex("rgb("+parseInt(c*p+r)+","+parseInt(h*p+o)+","+parseInt(u*p+s)+")");_.push(f)}return _},t.getColor=function(e,i,n,a,r){var o=t.colorRgb(e),s=o[0],l=o[1],c=o[2],h=t.colorRgb(i),u=(h[0]-s)/(r-a),_=(h[1]-l)/(r-a),p=(h[2]-c)/(r-a);return t.colorHex("rgb("+parseInt(u*n+s)+","+parseInt(_*n+l)+","+parseInt(p*n+c)+")")},t.colorRgb=function(t){if((t=t.toLowerCase())&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===t.length){for(var e="#",i=1;i<4;i+=1)e+=t.slice(i,i+1).concat(t.slice(i,i+1));t=e}for(var n=[],i=1;i<7;i+=2)n.push(parseInt("0x"+t.slice(i,i+2)));return n}return t},t.colorHex=function(t){var e=t;if(/^(rgb|RGB)/.test(e)){for(var i=e.replace(/(?:(|)|rgb|RGB)*/g,"").split(","),n="#",a=0;a<i.length;a++){var r=Number(i[a]).toString(16);"0"===(r=r<10?"0"+r:r)&&(r+=r),n+=r}return 7!==n.length&&(n=e),n}if(!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(e))return e;var o=e.replace(/#/,"").split("");if(6===o.length)return e;if(3===o.length){for(var s="#",a=0;a<o.length;a+=1)s+=o[a]+o[a];return s}},t._colorindex=-1,t.Color=["rgb(251, 118, 123)","rgb(129, 227, 238)","#88bde6","#fbb258","#90cd97","#f6aac9","#bfa554","#bc99c7","#eddd46","#f07e6e","#8c8c8c"],t}();t.ColorUtils=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.graphics.Point,n=function(){function t(t,e,n,a,r){this.angle=r,this.centerx=t,this.centery=e,this.width=n,this.height=a,this.points=[new i,new i,new i,new i,new i,new i,new i,new i,new i];var o=this.points[0],s=this.points[1],l=this.points[2],c=this.points[3],h=this.points[4],u=this.points[5],_=this.points[6],p=this.points[7];p.x=this.centerx+Math.cos(this.angle)*this.width/2,p.y=this.centery+Math.sin(this.angle)*this.width/2,_.x=2*this.centerx-p.x,_.y=2*this.centery-p.y,s.x=p.x+Math.sin(this.angle)*this.height/2,s.y=p.y-Math.cos(this.angle)*this.height/2,l.x=2*p.x-s.x,l.y=2*p.y-s.y,c.x=_.x-Math.sin(this.angle)*this.height/2,c.y=_.y+Math.cos(this.angle)*this.height/2,o.x=2*_.x-c.x,o.y=2*_.y-c.y,u.x=(c.x+l.x)/2,u.y=(c.y+l.y)/2,h.x=(o.x+s.x)/2,h.y=(o.y+s.y)/2;var f=this.points[8];f.x=this.centerx,f.y=this.centery}return Object.defineProperty(t.prototype,"raidius",{get:function(){return Math.sqrt(Math.pow(this.center.x-this.leftTop.x,2)+Math.pow(this.center.y-this.leftTop.y,2))},enumerable:!0,configurable:!0}),t.prototype.offset=function(t,e,i){for(var n=0;n<this.points.length;++n){var a=this.points[n];a.x+=t*Math.cos(i),a.y+=e*Math.sin(i)}},Object.defineProperty(t.prototype,"leftTop",{get:function(){return this.points[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTop",{get:function(){return this.points[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftBottom",{get:function(){return this.points[3]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightBottom",{get:function(){return this.points[2]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerTop",{get:function(){return this.points[4]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"centerBottom",{get:function(){return this.points[5]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"center",{get:function(){return this.points[8]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startPoint",{get:function(){return new i(this.centerx,this.centery)},enumerable:!0,configurable:!0}),t}();e.RotateRect=n;var a=function(){return function(t,e,n,a,r){this._cx=t,this._cy=e,this._leftwidth=n,this._rightwidth=a,this._angle=r,this.endPoint=new i,this.endPoint.x=t+Math.sin(this._angle)*a,this.endPoint.y=e-Math.cos(this._angle)*a,this.startPoint=new i,this.startPoint.x=t-Math.sin(this._angle)*n,this.startPoint.y=e+Math.cos(this._angle)*n}}();e.RotateLine=a}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";!function(t){t[t.Width=0]="Width",t[t.Height=1]="Height",t[t.Size=2]="Size",t[t.Radius=3]="Radius",t[t.Sweep=4]="Sweep",t[t.Alpha=5]="Alpha"}(t.AnimationType||(t.AnimationType={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";!function(t){t[t.SUM=0]="SUM",t[t.AVERAGE=1]="AVERAGE",t[t.COUNT=2]="COUNT",t[t.NONE=3]="NONE"}(t.Agg||(t.Agg={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";!function(t){t[t.Desc=0]="Desc",t[t.Asc=1]="Asc",t[t.None=2]="None"}(t.Order||(t.Order={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";!function(t){t[t.Linear=0]="Linear",t[t.Log=1]="Log",t[t.Ordinal=2]="Ordinal",t[t.LatLon=3]="LatLon"}(t.ScaleType||(t.ScaleType={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){t[t.Number=0]="Number",t[t.String=1]="String",t[t.Object=2]="Object",t[t.Array=3]="Array",t[t.Boolean=4]="Boolean",t[t.Date=5]="Date"}(t.DataType||(t.DataType={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";!function(t){t[t.Bar=0]="Bar",t[t.Line=1]="Line",t[t.Scatter=2]="Scatter",t[t.Area=3]="Area",t[t.Pie=4]="Pie",t[t.Sunburst=5]="Sunburst",t[t.TreeMap=6]="TreeMap",t[t.Radar=7]="Radar",t[t.Candlestick=8]="Candlestick"}(t.ChartType||(t.ChartType={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";!function(t){t[t.X=0]="X",t[t.Y=1]="Y"}(t.AxisType||(t.AxisType={}))}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(e){"use strict";var i=function(){function e(e,i){this.__val=e,e instanceof Array?this.__isMultiple=!0:this.__isMultiple=!1,this.__scaleType=i,this.__dataType=t.Utility.getType(e)}return Object.defineProperty(e.prototype,"scaleType",{get:function(){return this.__scaleType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataType",{get:function(){return this.__dataType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMultiple",{get:function(){return this.__isMultiple},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.__val},enumerable:!0,configurable:!0}),e}();e.Value=i}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){var n=t.graphics.Util,a=function(){function t(t,i,a){void 0===a&&(a=0),this.index=0,this.aggregate=n.asEnum(t.aggregate,e.Agg,!0),null==this.aggregate&&(this.aggregate=e.Agg.NONE);var r=t.field.split(",");null!=r&&r.length>1?this.bind=r:this.bind=t.field,this.type=n.asEnum(t.type,e.ScaleType,!0),null==this.type&&(this.type=e.ScaleType.Ordinal),this.logBase=t.logBase,this.name=i,this.range=t.range,this.band=t.band,null==a||isNaN(a)||(this.index=a)}return Object.defineProperty(t.prototype,"isMultiple",{get:function(){return this.bind instanceof Array},enumerable:!0,configurable:!0}),t.prototype.equals=function(t){return _.isEqual(this,t)},t}();i.Field=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){function t(t,e){if(this.series=t.split(","),null!=e&&e instanceof Array){this.rules=[];for(var n=0,a=e;n<a.length;n++){var r=a[n];this.rules.push(new i(r.field,r.express))}}}return t.prototype.equals=function(t){return _.isEqual(this,t)},t}();t.Filter=e;var i=function(){return function(t,e){this.filed=t,this.express=e}}();t.Rule=i}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){var e=function(){return function(e){if(this._stack=!1,this._radial=!1,e.x&&(this.x=new t.Field(e.x,"x")),e.geoposition&&(this.geoposition=new t.Field(e.geoposition,"geoposition")),e.y&&(this.y=new t.Field(e.y,"y")),e.color&&(this.color=new t.Field(e.color,"color")),e.shape&&(this.shape=new t.Field(e.shape,"shape")),e.size&&(this.size=new t.Field(e.size,"size")),e.tooltip&&(this.tooltip=new t.Field(e.tooltip,"tooltip")),e.text&&(this.text=new t.Field(e.text,"text")),e.group&&(this.group=new t.Field(e.group,"group")),e.values&&e.values instanceof Array){this.values=[];for(var i=0;i<e.values.length;++i){var n=e.values[i];this.values.push(new t.Field(n,n.name))}}null!=e.stack&&(this._stack=e.stack),null!=e.radial&&(this._radial=e.radial)}}();t.Encoding=e}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){return function(){}}();t.Item=e}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){return function(){}}();t.TransForm=e}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.graphics.Util,a=t.Debug,r=function(){function t(t,i,r){this.__points=[],this.__chartType=e.ChartType.Bar,this.enable=!0,this.showlabels=!1,a.assert(null!=t),a.assert(null!=i),a.assert(i.data instanceof Array,"Series must be Array"),this.__data=i.data,this.__name=i.name,this.__index=r,this.__chartType=n.asEnum(i.charttype,e.ChartType),this.__encoding=t,this.__pairs=[];for(var o in this.__encoding)if(e.Utility.iskey(o)){var s=this.__encoding[o],l=this.__createScale(s);this.__pairs.push({filed:s,scale:l})}for(var c=0,h=this.__data;c<h.length;c++){var u=h[c];this.__points.push(this.__analyseItem(this.__pairs,u))}for(var _=0,p=this.__pairs;_<p.length;_++){var f=p[_],s=f.filed,l=f.scale;"x"!=s.name&&"y"!=s.name&&null!=s.range&&s.range.length>0&&(l instanceof e.LinearScale?l.range(s.range):l instanceof e.LogScale?l.range(s.range):l instanceof e.OrdinalScale&&(!0===s.band?l.rangeBounds(s.range):l.range(s.range))),l.refresh()}}return t.prototype.__analyseItem=function(t,n){a.assert(null!=n),a.assert("object"==typeof n);var r=new i.Item;a.assert(!(n instanceof Array));for(var o=0,s=t;o<s.length;o++){var l=s[o],c=l.filed,h=l.scale,u=null;if(u=c.bind instanceof Array?new i.Value([n[c.bind[0]],n[c.bind[1]]],c.type):new i.Value(n[c.bind],c.type),r[c.name]=u,"string"==typeof c.bind)if(h instanceof e.LinearScale){var _=e.Utility.max([n[c.bind],h.max]),p=e.Utility.min([n[c.bind],h.min]);h.domain([p,_])}else if(h instanceof e.LogScale){var _=e.Utility.max([n[c.bind],h.max]),p=e.Utility.min([n[c.bind],h.min]);h.domain([p,_])}else h instanceof e.OrdinalScale&&h.domains.push(n[c.bind]);else c.isMultiple&&h instanceof e.map.MapOrdinalScale&&h.domains.push(u.value)}return r},t.prototype._refresh=function(){for(var t=0,i=this.__pairs;t<i.length;t++)(l=i[t]).scale.domain([]);for(var n=0,a=this.__points;n<a.length;n++)for(var r=a[n],o=0,s=this.__pairs;o<s.length;o++){var l=s[o],c=l.filed,h=l.scale;if(h instanceof e.LinearScale){var u=r[c.name],_=e.Utility.max(u.isMultiple?u.value.concat([h.max]):[u.value,h.max]),p=e.Utility.min(u.isMultiple?u.value.concat([h.min]):[u.value,h.min]);h.domain([p,_])}else if(h instanceof e.LogScale){var u=r[c.name],_=e.Utility.max(u.isMultiple?u.value.concat([h.max]):[u.value,h.max]),p=e.Utility.min(u.isMultiple?u.value.concat([h.min]):[u.value,h.min]);h.domain([p,_])}else if(h instanceof e.OrdinalScale)if((u=r[c.name]).isMultiple)for(var f=0,d=u.value;f<d.length;f++){m=d[f];h.domains.push(m)}else h.domains.push(u.value);else if(h instanceof e.map.MapOrdinalScale)if((u=r[c.name]).isMultiple)for(var y=0,g=u.value;y<g.length;y++){var m=g[y];h.domains.push(m)}else h.domains.push(u.value)}},t.prototype.__createScale=function(t){a.assert(null!=t);var i=null;switch(t.type){case e.ScaleType.Linear:i=new e.LinearScale(t.name);break;case e.ScaleType.Ordinal:i=new e.OrdinalScale(t.name);break;case e.ScaleType.Log:i=new e.LogScale(t.logBase,t.name);break;case e.ScaleType.LatLon:i=new e.map.MapOrdinalScale(t.name);break;default:a.assert(!1,t.type+" ScaleType has not been implement!")}return i},Object.defineProperty(t.prototype,"data",{get:function(){return this.__data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.__name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scalePairs",{get:function(){return this.__pairs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"points",{get:function(){return this.__points},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.__points.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chartType",{get:function(){return this.__chartType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.__index},enumerable:!0,configurable:!0}),t.prototype.getScale=function(t){var e=_.findIndex(this.__pairs,function(e){return e.filed.name==t});return e>=0?this.__pairs[e].scale:null},t.prototype.clone=function(){return _.cloneDeep(this)},t}();i.Series=r}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(e){"use strict";var i=function(){function i(t){this.__chartTypes=[],this.__data=t,this.__encoding=this._analyseEncoding(this.__data.encoding),this._analyseFilter(t.filter),this.refresh()}return i.prototype._analyseEncoding=function(t){return new e.Encoding(t)},Object.defineProperty(i.prototype,"chartTypes",{get:function(){return this.__chartTypes},enumerable:!0,configurable:!0}),i.prototype._analyseSeries=function(t,i){this.__series=[],this.__allSeries=[];for(var n=0;n<t.length;++n){var a=t[n],r=new e.Series(i,a,n);null!=this.__filter&&this.__filter.series.indexOf(a.name)>-1?(r.enable=!0,this.__series.push(r),this.__chartTypes.indexOf(r.chartType)<0&&this.__chartTypes.push(r.chartType)):r.enable=!1,this.__allSeries.push(r)}},i.prototype.refresh=function(){this._analyseSeries(this.__data.series,this.__encoding),this._createLayoutScales(this.encoding)},i.prototype._analyseFilter=function(t){null!=t&&(this.__filter=new e.Filter(t.series,t.rules))},i.prototype._createLayoutScales=function(e){if(this.__scalePairs=[],this.__series.length>1){this._stack(t.ChartType.Bar),this._stack(t.ChartType.Line),this._stack(t.ChartType.Area),this._stack(t.ChartType.Scatter);for(var i=0;i<this.__series.length-1;++i)for(var n=this.__series[i],a=this.__series[i+1],r=0,o=n.scalePairs;r<o.length;r++)for(var s=o[r],l=0,c=a.scalePairs;l<c.length;l++){var h=c[l];if(s.filed.equals(h.filed)){var u=s.filed,_=this.encoding._stack&&"y"==s.filed.name,p=this.__getScaleInfobyname(s.filed.name,n.name),f=this.__getScaleInfobyname(h.filed.name,a.name);null==p&&null==f?null!=(w=t.Utility.mergeScale(s.scale,h.scale,_))?this.__scalePairs.push({series:[n.name,a.name],filed:u,scale:w}):(this.__scalePairs.push({series:[n.name],filed:s.filed,scale:s.scale}),this.__scalePairs.push({series:[a.name],filed:h.filed,scale:h.scale})):null==p&&null!=f?null!=(w=t.Utility.mergeScale(s.scale,f.scale,_))?(f.scale=w,f.series.push(n.name)):this.__scalePairs.push({series:[n.name],filed:s.filed,scale:s.scale}):null!=p&&null==f&&(null!=(w=t.Utility.mergeScale(h.scale,p.scale,_))?(p.scale=w,p.series.push(a.name)):this.__scalePairs.push({series:[a.name],filed:h.filed,scale:h.scale}))}}for(var d=0,y=this.__series;d<y.length;d++)for(var g=y[d],m=0,v=g.scalePairs;m<v.length;m++){var b=v[m],w=this._getScaleByName(b.filed.name,g.name);null!=w&&(b.scale=w)}}else if(1==this.__series.length)for(var S=0,x=this.__series[0].scalePairs;S<x.length;S++){b=x[S];this.__scalePairs.push({series:[this.__series[0].name],filed:b.filed,scale:b.scale.clone()})}},i.prototype._stack=function(t){if(this.encoding._stack)for(var e={},i={},n=0;n<this.series.length;++n){var a=this.series[n];a.chartType===t&&this._setSeriesStack(a,i,e)}},i.prototype.__getScaleInfobyname=function(t,e){return _.find(this.__scalePairs,function(i){return i.series.indexOf(e)>=0&&t==i.filed.name})},i.prototype._getScaleByName=function(t,e){return _.result(_.find(this.__scalePairs,function(i){return i.series.indexOf(e)>=0&&t==i.filed.name}),"scale")},i.prototype._setSeriesStack=function(i,n,a){if(i.getScale("x")instanceof t.OrdinalScale)for(var r=0,o=i.points;r<o.length;r++){var s=o[r],l=a[s.x.value],c=n[s.x.value];null==l&&(l=0,a[s.x.value]=0),null==c&&(c=0,n[s.x.value]=0);var h=s.y.value<0,u=h?l:c,_=u+s.y.value;h?a[s.x.value]=_:n[s.x.value]=_,s.y=new e.Value([u,_],s.y.scaleType)}i._refresh()},i.prototype.getSeriesByType=function(t){return _.filter(this.__series,function(e){return e.chartType===t})},Object.defineProperty(i.prototype,"series",{get:function(){return this.__series},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"allSeries",{get:function(){return this.__allSeries},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"encoding",{get:function(){return this.__encoding},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"filter",{get:function(){return this.__filter},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scalePairs",{get:function(){return this.__scalePairs},enumerable:!0,configurable:!0}),i}();e.DataModel=i}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(e){"use strict";var i=function(){function e(e,i){if(this.__val=e,this.__scaleType=i,this.__dataType=t.Utility.getType(e),null==this.__scaleType)switch(this.__dataType){case t.DataType.Number:case t.DataType.Date:this.__scaleType=t.ScaleType.Linear;break;case t.DataType.String:case t.DataType.Boolean:default:this.__scaleType=t.ScaleType.Ordinal}}return Object.defineProperty(e.prototype,"scaleType",{get:function(){return this.__scaleType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataType",{get:function(){return this.__dataType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.__val},enumerable:!0,configurable:!0}),e}();e.Value=i}(t.hierarchical||(t.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){var n=t.graphics.Util,a=function(){function t(t,i){this.aggregate=n.asEnum(t.aggregate,e.Agg,!0),null==this.aggregate&&(this.aggregate=e.Agg.NONE),this.bind=t.field,this.name=i,this.range=t.range,this.band=t.band,this.type=n.asEnum(t.type,e.ScaleType,!0)}return t.prototype.equals=function(t){return _.isEqual(this,t)},t}();i.Field=a}(e.hierarchical||(e.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){return function(){this._hidden=!1}}();t.Item=e}(t.hierarchical||(t.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){return function(e){null!=e.color&&(this.color=new t.Field(e.color,"color")),null!=e.size&&(this.size=new t.Field(e.size,"size")),null!=e.tooltip&&(this.tooltip=new t.Field(e.tooltip,"tooltip")),null!=e.text&&(this.text=new t.Field(e.text,"text")),null!=e.children&&(this.children=new t.Field(e.children,"children"))}}();t.Encoding=e}(t.hierarchical||(t.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.graphics.Util,a=t.Debug,r=function(){function t(i){t.id=0,this.__data=i,this.__chartType=n.asEnum(i.charttype,e.ChartType),this.__encoding=this._analyseEncoding(this.__data.encoding),this.__createRoot()}return t.prototype._analyseEncoding=function(t){return new i.Encoding(t)},Object.defineProperty(t.prototype,"chartType",{get:function(){return this.__chartType},enumerable:!0,configurable:!0}),t.prototype.__createModel=function(e,n){var a=new i.Item;a._id=(++t.id).toFixed();for(var r in this.__encoding)if("children"===r){null==a.children&&(a.children=[]);var o=e[this.__encoding.children.bind];if(null!=o&&o instanceof Array)for(var s=0,l=o;s<l.length;s++){var c=l[s];a.children.push(this.__createModel(c,n+1))}}else"count"===this.__encoding[r].bind||"depth"===this.__encoding[r].bind?this.__encoding[r].bind in e?a[r]=new i.Value(e[this.__encoding[r].bind],null):"count"==this.__encoding[r].bind?a[r]=new i.Value(null!=e.children?e.children.length:1,null):"depth"==this.__encoding[r].bind&&(a.depth=new i.Value(n,null)):a[r]=new i.Value(e[this.__encoding[r].bind],null);return a},t.prototype.__createRoot=function(){this.__root=[];for(var t=0,e=this.__data.values;t<e.length;t++){var i=e[t];this.__root.push(this.__createModel(i,0))}},t.prototype.refresh=function(){},t.prototype.__createScale=function(t){a.assert(null!=t);var i=null;switch(t.type){case e.ScaleType.Linear:i=new e.LinearScale(t.name);break;case e.ScaleType.Ordinal:i=new e.OrdinalScale(t.name);break;default:a.assert(!1,t.type+" ScaleType has not been implement!")}return i},Object.defineProperty(t.prototype,"root",{get:function(){return this.__root},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encoding",{get:function(){return this.__encoding},enumerable:!0,configurable:!0}),t.id=0,t}();i.DataModel=r}(e.hierarchical||(e.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){var e=function(){function e(e){this.__bound=!1,this.__domains=[],this.__ranges=[],this.id=e,this._order=t.Order.None}return Object.defineProperty(e.prototype,"id",{get:function(){return this.__id},set:function(t){this.__id=t},enumerable:!0,configurable:!0}),e.prototype.domain=function(t){return this.__domains=t,this},e.prototype.range=function(t){return this.__ranges=t,this.refresh()},e.prototype.rangeBounds=function(t){return this},e.prototype.refresh=function(){return this},e.prototype.getScaleValue=function(t){return 0},Object.defineProperty(e.prototype,"startPosition",{get:function(){return this.__start},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:function(){return this.__end},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"order",{get:function(){return this._order},set:function(t){this._order=t},enumerable:!0,configurable:!0}),e.prototype.equal=function(t){return null!=t&&this.id==t.id},e.prototype.clone=function(){return _.cloneDeep(this)},e}();t.Scale=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";var e=function(e){function i(t){return e.call(this,t)||this}return __extends(i,e),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),i.prototype.domain=function(t){return e.prototype.domain.call(this,t),this._min=this.__domains[0],this._max=this.__domains[1],this},i.prototype.refresh=function(){return this.order===t.Order.Asc?(this.__start=this.__ranges[0],this.__end=this.__ranges[1]):this.order===t.Order.Desc?(this.__start=this.__ranges[1],this.__end=this.__ranges[0]):(this.__start=this.__ranges[0],this.__end=this.__ranges[1]),this._min=this.__domains[0],this._max=this.__domains[1],this},i.prototype.range=function(t){return this.__ranges=t,this.refresh(),this},i.prototype.getScaleValue=function(t){return this._max==this._min?(this.__end-this.__start)/2+this.__start:(this.__end-this.__start)/(this._max-this._min)*(t-this._min)+this.__start},i.prototype.equal=function(t){return null!=t&&(t.id==this.id&&t.max==this.max&&t.min==this.min)},i}(t.Scale);t.LinearScale=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){var e=function(e){function i(t){var i=e.call(this,t)||this;return i._domainCache={},i._size=0,i}return __extends(i,e),i.prototype.refresh=function(){this.order===t.Order.Asc?this.__domains.sort(function(t,e){return t-e}):this.order===t.Order.Desc&&this.__domains.sort(function(t,e){return e-t}),this._domainCache={};for(var e=0,i=0,n=this.__domains;i<n.length;i++){var a=n[i];null==this._domainCache[a]&&(this._domainCache[a]=e,e++)}return this._size=e,t.Debug.assert(null!=this.__ranges,""),2==this.__ranges.length&&(this.__start=this.__ranges[0],this.__end=this.__ranges[1]),this},Object.defineProperty(i.prototype,"max",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"domains",{get:function(){return this.__domains},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ranges",{get:function(){return this.__ranges},enumerable:!0,configurable:!0}),i.prototype.range=function(t){return this.__ranges=t,this.__bound=!1,this.refresh(),this},i.prototype.rangeBounds=function(t){return this.__ranges=t,this.__bound=!0,this.refresh(),this},i.prototype.domain=function(t){return this.__domains=t,this},i.prototype.getScaleValue=function(t){var e=this._domainCache[t];isNaN(e)&&(e=0);var i=0,n=this._size;return n<2&&(n=2),"number"==typeof this.__end&&"number"==typeof this.__start&&(i=this.__bound?(e+.5)*(this.__end-this.__start)/n+this.__start:e*(this.__end-this.__start)/(n-1)+this.__start),i},i}(t.Scale);t.OrdinalScale=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){var e=function(e){function i(t,i){var n=e.call(this,i)||this;return n._ticksize=6,n._logBase=t,n}return __extends(i,e),i.prototype.domain=function(t){return e.prototype.domain.call(this,t),this._min=this.__domains[0],this._max=this.__domains[1],this},Object.defineProperty(i.prototype,"logBase",{get:function(){return this._logBase},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tickSize",{set:function(t){this._ticksize=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){if(this.order===t.Order.Asc?(this.__start=this.__ranges[0],this.__end=this.__ranges[1]):this.order===t.Order.Desc?(this.__start=this.__ranges[1],this.__end=this.__ranges[0]):(this.__start=this.__ranges[0],this.__end=this.__ranges[1]),this._min=this.__domains[0],this._max=this.__domains[1],this._logBase>0){var e=this._logBase,i=Math.log(e),n=Math.ceil(Math.log(this._max)/i);this._max=Math.pow(e,n);var a=Math.floor(Math.log(this._min)/i);this._min=Math.pow(e,a),(this._min<=0||isNaN(this._min))&&(this._min=1),this._max<this._min&&(this._max=this._min+1)}return this},i.prototype.range=function(t){return this.__ranges=t,this.refresh(),this},Object.defineProperty(i.prototype,"ticks",{get:function(){for(var t=new Array(this._ticksize),e=0;e<=this._ticksize;++e)t[e]=e*this._niceTick;return t},enumerable:!0,configurable:!0}),i.prototype.getScaleValue=function(t){t<this._min&&(t=this._min);var e=Math.log(this._max/this._min);return Math.log(t/this._min)/e*(this.__end-this.__start)+this.__start},i}(t.Scale);t.LogScale=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";!function(t){t[t.Shape=0]="Shape",t[t.Series=1]="Series",t[t.Axis=2]="Axis",t[t.SeriesLegend=3]="SeriesLegend",t[t.ScaleLegend=4]="ScaleLegend"}(t.ElementType||(t.ElementType={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.view.animation.Animation,n=function(){function t(){this._cache={}}return Object.defineProperty(t.prototype,"isempty",{get:function(){var t=0;for(var e in this._cache)if(++t>0)return!1;return!0},enumerable:!0,configurable:!0}),t.prototype.resetCache=function(t){this._cache={};for(var e=0,i=t;e<i.length;e++){var n=i[e];this._cache[n.id]=n}},t.prototype.startCompare=function(t){for(var e={},i=0,n=t;i<n.length;i++){var a=n[i];e[a.id]=a}if(this.isempty)return this._cache=e,!1;for(var r in this._cache){var o=this._cache[r],s=e[r];null!=s&&null!=o&&this.__startAnimation(o,s)}return this._cache=e,!0},t.prototype.__startAnimation=function(t,e){var i=new a(t.layoutInfo.innerrect,e.layoutInfo.innerrect);i.duration=500,i.fillAfter=!0,i.from=0,i.to=1,e.startAnimation(i)},t.prototype.__switchLayout=function(t,e){var i=t.layoutInfo.clone();t.layoutInfo.innerrect=e.layoutInfo.innerrect.clone(),e.layoutInfo.innerrect=i.innerrect},t}();e.ComparedAnimationCache=n;var a=function(e){function i(i,n){var a=e.call(this)||this;return a.ease=new t.view.animation.AnimationEase,a.fromrect=i,a.torect=n,a}return __extends(i,e),i.prototype.applyTransformation=function(t,e,i){var n=this.from+(this.to-this.from)*t;i.layoutInfo.innerrect.left=this.fromrect.left+(this.torect.left-this.fromrect.left)*n,i.layoutInfo.innerrect.top=this.fromrect.top+(this.torect.top-this.fromrect.top)*n,i.layoutInfo.innerrect.width=this.fromrect.width+(this.torect.width-this.fromrect.width)*n,i.layoutInfo.innerrect.height=this.fromrect.height+(this.torect.height-this.fromrect.height)*n},i.prototype.onStartAniamtion=function(t,i){e.prototype.onStartAniamtion.call(this,t,i)},i.prototype.onEndAnimation=function(t,i){e.prototype.onEndAnimation.call(this,t,i),i.layoutInfo.innerrect=i._oldLayoutInfo.innerrect.clone()},i}(i)}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.view.View,a=t.widget.LinearLayout,r=t.view.MeasureSpec,o=t.graphics.Size,s=t.graphics.Rect,l=t.device.Default,c=t.view.LayoutParams,h=t.graphics.Point,u=t.view.event.MotionEvent,_=function(t){function i(e){var i=t.call(this,null)||this;return i.__shape=e,i}return __extends(i,t),Object.defineProperty(i.prototype,"series",{get:function(){return this._series},set:function(t){this._series=t,this.__loadItems()},enumerable:!0,configurable:!0}),i.prototype.__loadItems=function(){this.removeAllViews();for(var t=0;t<this.series.length;++t){var i=new p;i.series=this.series[t],"bar"==this.__shape?i.icon=new d:"scatter"==this.__shape&&(i.icon=new y),i.series.enable?i.icon.color=e.ColorUtils.indexColor(t):i.icon.color="gray",this.children.push(i)}},i}(a);i.SeriesLegend=_;var p=function(t){function i(){var e=t.call(this,null)||this;return e.font=l.font,e.font.fontColor="black",e}return __extends(i,t),i.prototype.onMeasure=function(t,e,i){t.getMeasureValue(),e.getMeasureValue();var n=new o(0,0);n=i.measureString(this.series.name,this.font),this.__fontRect=new s(0,0,n.width,n.height);var a=2*n.height;return this.__iconRect=new s(0,0,a,n.height),n.width=n.width+15+a,this.setMeasuredDimension(new r(n.width,c.EXACTLY),new r(n.height,c.EXACTLY)),n},i.prototype.onLayout=function(e,i,n,a,r){t.prototype.onLayout.call(this,e,i,n,a,r),this.__fontRect.translate(e,i),this.__iconRect.translate(e+5+this.__fontRect.width,i)},i.prototype.onDraw=function(t){t.drawText(this.series.name,this.__fontRect.startPoint,this.font),this.icon.draw(this.__iconRect,t)},i.prototype.onMouseEvent=function(t){switch(t.action){case u.ACTION_CLICK:console.log("event "),window.EventHandler(new h(t.x,t.y),e.ElementType.SeriesLegend,{series:this.series.name,enable:this.series.enable,action:"enableseries"});break;case u.ACTION_MOUSE_ON:this.series.showlabels=!0,window.EventHandler(new h(t.x,t.y),e.ElementType.SeriesLegend,{series:this.series.name,showlabel:this.series.showlabels,action:"showlabel"});break;case u.ACTION_MOUSE_OUT:this.series.showlabels=!1,window.EventHandler(new h(t.x,t.y),e.ElementType.SeriesLegend,{series:this.series.name,showlabel:this.series.showlabels,action:"showlabel"})}return!1},i}(n);i.LegendItem=p;var f=function(){return function(){}}();i.Icon=f;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.draw=function(t,e){var i=l.style;i.background=this.color,e.drawRect(t.startPoint,t.endPoint,!0,i)},e}(f);i.BarIcon=d;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.draw=function(t,e){var i=l.style;i.background=this.color,e.drawArc(t,0,360,i)},e}(f);i.CircleIcon=y}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=function(t){function e(){var i=t.call(this,null)||this;return i.priority=e.PRIORITY,i}return __extends(e,t),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),e.prototype.onMouseEvent=function(t){return console.log("shape ==== "+t.toString()),!0},e.PRIORITY=1e4,e}(t.view.View);e.Shape=i}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";var e=function(e){function i(i,n,a,r,o,s,l){var c=e.call(this)||this;c.__padding=0,c.priority=10*t.Shape.PRIORITY,c.__padding=l,c.text=i,c.labelrect=new t.RotateRect(n,a,r+2*l,o+2*l,null==s||isNaN(s)?0:s),c._xs=[],c._ys=[];for(var h=0;h<4&&h<c.labelrect.points.length;++h)c._xs[h]=c.labelrect.points[h].x,c._ys[h]=c.labelrect.points[h].y;return c}return __extends(i,e),i.prototype.onDraw=function(t){t.drawPolygon(this._xs,this._ys,this.background);var e=this.labelrect.leftTop.clone();e.offset(this.__padding,this.__padding),t.drawText(this.text,e,this._font)},i.prototype.refresh=function(){},i}(t.Shape);t.Label=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){null!=t&&t!=this._label&&(this._label=t)},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){},e}(t.Shape);t.PlotShape=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=t.view.animation.Animation,a=t.view.event.MotionEvent,r=function(t){function n(e,a,r,o,s,l){var c=t.call(this)||this,h=a,u=e,_=o,p=r;return _<0&&(h+=_,_=Math.abs(_)),c.priority=++n.BarPrority,c.layoutInfo.reset(u,h,u+p,h+_,c.padding,0),c._oldLayoutInfo=c.layoutInfo.clone(),c._style=s,null==s&&(c._style=i.style),c._strokeStyle=l,null==l&&(c._strokeStyle=i.strokestyle),c}return __extends(n,t),n.prototype.onDraw=function(e){window.renderTimes++,e.drawRect(this.layoutInfo.innerrect.startPoint,this.layoutInfo.innerrect.endPoint,!0,this._style),t.prototype.onDraw.call(this,e)},n.prototype.onMouseEvent=function(t){switch(t.action){case a.ACTION_MOUSE_ON:var e=new s(this.layoutInfo.innerrect);e.duration=400,e.from=1,e.to=1.3,e.fillAfter=!0,e.id="mouseOn Animation ",console.log("=======> addAnimation on "),console.log("mouse on "),this.startAnimation(e);break;case a.ACTION_MOUSE_OUT:var i=new s(this.layoutInfo.innerrect);i.duration=200,i.from=1.3,i.to=1,i.id="mouseOut Animation ",i.fillAfter=!1,console.log("=======> addAnimation out "),console.log("mouse out "),this.startAnimation(i);break;case a.ACTION_MOUSE_MOVE:case a.ACTION_MOUSE_OUT:}return!0},n.BarPrority=2*e.Shape.PRIORITY,n}(e.PlotShape);e.BarShape=r;var o=function(e){function i(i){var n=e.call(this)||this;return n.ease=new t.view.animation.BounceAnimationEase,n}return __extends(i,e),i.prototype.applyTransformation=function(t,e,i){if(i instanceof r){var n=this.from+(this.to-this.from)*t;this.rect.clone();i.layoutInfo.innerrect.top=this.rect.top+this.rect.height-this.rect.height*n,i.layoutInfo.innerrect.height=this.rect.height*n}},i.prototype.onStartAniamtion=function(t,e){this.rect=e.layoutInfo.innerrect.clone()},i.prototype.onEndAnimation=function(t,e){},i}(n);e.BarAnimation=o;var s=function(e){function i(i){var n=e.call(this)||this;return n.id="",n.ease=new t.view.animation.BounceAnimationEase,n}return __extends(i,e),i.prototype.applyTransformation=function(t,e,i){if(i instanceof r){var n=this.from+(this.to-this.from)*t;this.rect.clone();i.layoutInfo.innerrect.left=this.rect.left+(this.rect.width-this.rect.width*n)/2,i.layoutInfo.innerrect.width=this.rect.width*n,console.log(this.id+" width === "+i.layoutInfo.innerrect.width+" scale "+n+"  interpolatedTime "+t)}},i.prototype.onStartAniamtion=function(t,i){e.prototype.onStartAniamtion.call(this,t,i),console.log("onStartAniamtion view Width "+i.layoutInfo.innerrect.width),this.rect=i.layoutInfo.innerrect.clone()},i.prototype.onEndAnimation=function(t,i){e.prototype.onEndAnimation.call(this,t,i),console.log("onEndAnimation view Width "+i.layoutInfo.innerrect.width)},i}(n);e.BarWidthAnimation=s}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=t.view.animation.Animation,a=t.view.event.MotionEvent,r=function(t){function n(e,a,r,o,s,l){var c=t.call(this)||this;c.__oldColor=null;var h=a,u=e,_=o,p=r;return _<0&&(h+=_,_=Math.abs(_)),c.priority=++n.CubePrority,c.layoutInfo.reset(u,h,u+p,h+_,c.padding,0),c._oldLayoutInfo=c.layoutInfo.clone(),c._style=s,null==s&&(c._style=i.style),c._strokeStyle=l,null==l&&(c._strokeStyle=i.strokestyle),c.background=null,c}return __extends(n,t),n.prototype.onDraw=function(e){window.renderTimes++,e.drawRect(this.layoutInfo.innerrect.startPoint,this.layoutInfo.innerrect.endPoint,!0,this._style),t.prototype.onDraw.call(this,e),(null==this.animation||this.animation.isAniamtionEnd)&&e.drawText(this.text,this.layoutInfo.innerrect.startPoint,i.font)},n.prototype.invalidate=function(i){t.prototype.invalidate.call(this,i),e.Debug.logstack("cubeinvalidate  "+(null==window.cubeinvalidate?window.cubeinvalidate=0:window.cubeinvalidate++))},n.prototype.onMouseEvent=function(t){switch(t.action){case a.ACTION_MOUSE_ON:if("string"==typeof this.style.background){null==this.__oldColor&&(this.__oldColor=this.style.background);var i=e.ColorUtils.gradientColor(this.__oldColor,"#ffffff",3);this.style.background=i[1]}console.log("mouse on "),this.invalidate(!0);break;case a.ACTION_MOUSE_OUT:this.style.background=this.__oldColor,this.invalidate(!0),console.log("mouse out ");break;case a.ACTION_MOUSE_MOVE:break;case a.ACTION_CLICK:console.log("click "),null!=this.scaleCallBack&&this.scaleCallBack(this.layoutInfo.innerrect)}return!0},n.CubePrority=1*e.Shape.PRIORITY,n}(e.PlotShape);e.CubeShape=r;var o=function(e){function i(i){var n=e.call(this)||this;return n.ease=new t.view.animation.BounceAnimationEase,n}return __extends(i,e),i.prototype.applyTransformation=function(t,e,i){if(i instanceof r){var n=this.from+(this.to-this.from)*t;this.rect.clone();i.layoutInfo.innerrect.left=this.rect.left+(this.rect.width-this.rect.width*n)/2,i.layoutInfo.innerrect.width=this.rect.width*n,i.layoutInfo.innerrect.top=this.rect.top+(this.rect.height-this.rect.height*n)/2,i.layoutInfo.innerrect.height=this.rect.height*n}},i.prototype.onStartAniamtion=function(t,i){e.prototype.onStartAniamtion.call(this,t,i),this.rect=i.layoutInfo.innerrect.clone()},i.prototype.onEndAnimation=function(t,i){e.prototype.onEndAnimation.call(this,t,i)},i}(n);e.CubeAnimation=o}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=function(t){function e(e,n,a,r,o,s,l,c){var h=t.call(this)||this;return h.layoutInfo.reset(e-r,n-r,e+r,n+r,h.padding,0),h._oldLayoutInfo=h.layoutInfo.clone(),h._cx=e,h._cy=n,h._innerRadius=a,h._radius=r,h._startAngle=o,h._sweep=s,h._style=l,null==l&&(h._style=i.style),h._strokeStyle=c,null==c&&(h._strokeStyle=i.strokestyle),h._sweep<0&&(h._startAngle=h._startAngle+h._sweep,h._sweep=-1*h._sweep),h}return __extends(e,t),e.prototype.onDraw=function(t){t.drawDonut(this._cx,this._cy,this._radius,this._innerRadius,this._startAngle,this._sweep,this._style)},e}(e.PlotShape);e.RadialBarShape=n}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=t.view.animation.Animation,a=function(t){function e(e,n,a,r,o,s,l,c){var h=t.call(this)||this;return h.layoutInfo.reset(e-r,n-r,e+r,n+r,h.padding,0),h._oldLayoutInfo=h.layoutInfo.clone(),h._cx=e,h._cy=n,h._innerRadius=a,h._radius=r,h._startAngle=o,h._sweep=s,h._style=l,null==l&&(h._style=i.style),h._strokeStyle=c,null==c&&(h._strokeStyle=i.strokestyle),h._sweep<0&&(h._startAngle=h._startAngle+h._sweep,h._sweep=-1*h._sweep),h}return __extends(e,t),e.prototype.onDraw=function(t){t.drawDonut(this._cx,this._cy,this._radius,this._innerRadius,this._startAngle,this._sweep,this._style)},e}(e.PlotShape);e.SunburstShape=a;var r=function(i){function n(){var e=i.call(this)||this;return e.ease=new t.view.animation.BounceAnimationEase,e}return __extends(n,i),n.prototype.applyTransformation=function(t,i,n){if(n instanceof a||n instanceof e.RadialBarShape){var r=this.from+(this.to-this.from)*t;n._radius=r*this._radius}},n.prototype.onStartAniamtion=function(t,n){i.prototype.onStartAniamtion.call(this,t,n),(n instanceof a||n instanceof e.RadialBarShape)&&(this._radius=n._radius,this._sweep=n._sweep)},n.prototype.onEndAnimation=function(t,n){i.prototype.onEndAnimation.call(this,t,n),(n instanceof a||n instanceof e.RadialBarShape)&&(n._radius=this._radius,n._sweep=this._sweep)},n}(n);e.RadiusAnimation=r;var o=function(i){function n(){var e=i.call(this)||this;return e.ease=new t.view.animation.BounceAnimationEase,e}return __extends(n,i),n.prototype.applyTransformation=function(t,i,n){if(n instanceof a||n instanceof e.RadialBarShape){var r=this.from+(this.to-this.from)*t;n._sweep=r*this._sweep}},n.prototype.onStartAniamtion=function(t,n){i.prototype.onStartAniamtion.call(this,t,n),(n instanceof a||n instanceof e.RadialBarShape)&&(this._radius=n._radius,this._sweep=n._sweep)},n.prototype.onEndAnimation=function(t,n){i.prototype.onEndAnimation.call(this,t,n),(n instanceof a||n instanceof e.RadialBarShape)&&(n._radius=this._radius,n._sweep=this._sweep)},n}(n);e.SweepAnimation=o}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=t.view.event.MotionEvent,a=t.view.animation.Animation,r=function(t){function a(e,n,r,o,s,l){var c=t.call(this)||this,h=n,u=e,_=o,p=r;return _<0&&(h+=_,_=Math.abs(_)),c.layoutInfo.reset(u,h,u+p,h+_,c.padding,0),c._oldLayoutInfo=c.layoutInfo.clone(),c._style=s,null==s&&(c._style=i.style),c._strokeStyle=l,null==l&&(c._strokeStyle=i.strokestyle),c.priority=++a.ScatterPrority,c}return __extends(a,t),a.prototype.onDraw=function(t){t.drawArc(this.layoutInfo.innerrect,0,360,this.style)},a.prototype.onMouseEvent=function(t){switch(console.log("shape ==== "+t.toString()),t.action){case n.ACTION_MOUSE_ON:var e=new o(this.layoutInfo.innerrect);e.duration=400,e.from=1,e.to=1.2,e.fillAfter=!0,this.startAnimation(e);break;case n.ACTION_MOUSE_OUT:var i=new o(this.layoutInfo.innerrect);i.duration=200,i.from=1.2,i.to=1,i.fillAfter=!1,this.startAnimation(i);break;case n.ACTION_MOUSE_MOVE:case n.ACTION_MOUSE_OUT:}return!0},a.ScatterPrority=3*e.Shape.PRIORITY,a}(e.PlotShape);e.ScatterShape=r;var o=function(e){function i(i){var n=e.call(this)||this;return n.ease=new t.view.animation.BounceAnimationEase,n}return __extends(i,e),i.prototype.applyTransformation=function(t,e,i){var n=this.from+(this.to-this.from)*t;this.rect.clone();n-=1,i.layoutInfo.innerrect.left=this.rect.left-n*i.layoutInfo.innerrect.width/2,i.layoutInfo.innerrect.top=this.rect.top-n*i.layoutInfo.innerrect.height/2,i.layoutInfo.innerrect.width=this.rect.width+n*i.layoutInfo.innerrect.width,i.layoutInfo.innerrect.height=this.rect.height+n*i.layoutInfo.innerrect.height},i.prototype.onStartAniamtion=function(t,e){this.rect=e.layoutInfo.innerrect.clone()},i.prototype.onEndAnimation=function(t,e){},i}(a);e.ScatterAnimation=o}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=function(t){function n(a,r,o,s){var l=t.call(this)||this;l.priority=++n.LinesPrority,l.__xs=a,l.__ys=r;var c=e.Utility.min(a),h=e.Utility.min(r),u=e.Utility.max(a),_=e.Utility.max(r);return l.layoutInfo.reset(c,h,u,_,l.padding,0),l._oldLayoutInfo=l.layoutInfo.clone(),l._style=o,null==o&&(l._style=i.style),l._strokeStyle=s,null==s&&(l._strokeStyle=i.strokestyle),l}return __extends(n,t),Object.defineProperty(n.prototype,"strokeStyle",{get:function(){return this._strokeStyle},set:function(t){this._strokeStyle=t},enumerable:!0,configurable:!0}),n.prototype.onDraw=function(t){t.save(),t.clip(this.layoutInfo.innerrect),t.drawLines(this.__xs,this.__ys,this._strokeStyle),t.restore()},n.LinesPrority=4*e.PlotShape.PRIORITY,n}(e.PlotShape);e.LinesShape=n}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=t.view.animation.Animation,a=t.view.event.MotionEvent,r=function(t){function n(n,a,r,o){var s=t.call(this)||this;s.priority=e.Shape.PRIORITY+1,s.__xs=n,s.__ys=a,s._style=r;var l=Math.min.apply(Math,n),c=Math.min.apply(Math,a),h=Math.max.apply(Math,n),u=Math.max.apply(Math,a);return s.layoutInfo.reset(l,c,h,u,s.padding,0),s._oldLayoutInfo=s.layoutInfo.clone(),null==r&&(s._style=i.style),s._strokeStyle=o,null==o&&(s._strokeStyle=i.strokestyle),s}return __extends(n,t),Object.defineProperty(n.prototype,"strokeStyle",{get:function(){return this._strokeStyle},set:function(t){this._strokeStyle=t},enumerable:!0,configurable:!0}),n.prototype.onDraw=function(t){t.save(),t.clip(this.layoutInfo.innerrect),t.drawPolygon(this.__xs,this.__ys,this.style),t.restore()},n.prototype.onMouseEvent=function(t){switch(t.action){case a.ACTION_MOUSE_ON:console.log("mouse on ");break;case a.ACTION_MOUSE_OUT:console.log("mouse out ");break;case a.ACTION_MOUSE_MOVE:case a.ACTION_MOUSE_OUT:}return!0},n}(e.PlotShape);e.AreaShape=r;var o=function(e){function i(i){var n=e.call(this)||this;return n.ease=new t.view.animation.AnimationEase,n}return __extends(i,e),i.prototype.applyTransformation=function(t,e,i){var n=this.from+(this.to-this.from)*t;this.rect.clone();i.layoutInfo.innerrect.width=this.rect.width*n},i.prototype.onStartAniamtion=function(t,e){this.rect=e.layoutInfo.innerrect.clone()},i.prototype.onEndAnimation=function(t,e){},i}(n);e.AreaAnimation=o}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=t.graphics.Point,a=function(t){function e(e,a,r,o,s){var l=t.call(this)||this;return l.startPoint=new n(e,a),l.endPoint=new n(r,o),l._strokeStyle=s,null==s&&(l._strokeStyle=i.strokestyle),l}return __extends(e,t),e.prototype.onDraw=function(t){t.drawLine(this.startPoint,this.endPoint,this._strokeStyle)},e.prototype.refresh=function(){},e}(e.Shape);e.AxisLineShape=a}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";var e=function(){function t(){this.__shapelist=[]}return t.prototype.convert=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];throw"fuck Error"},Object.defineProperty(t.prototype,"shapeList",{get:function(){return this.__shapelist},enumerable:!0,configurable:!0}),t}();t.BaseLayout=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(e){"use strict";var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e}(t.BaseLayout);e.CartesianBaseLayout=i}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){var e=t.call(this)||this;return e.barStyle=n.style,e.lineStyle=n.strokestyle,e._locationCache=[],e._stack=!1,e._rect=null,e}return __extends(i,t),i.prototype.convert=function(t,e,i,n){this.__shapelist.length=0,this._serieslist=[];for(var a=0,r=t;a<r.length;a++){var o=r[a];this._serieslist.push(o.clone())}this._encoding=e,this._locationCache=[],this.__scalePairs=[],this._stack=e._stack,this._rect=i,this.__analyseScales();for(var s=0;s<this._serieslist.length;++s)this._layoutSeries(this._serieslist[s],s,n);return this.__shapelist},i.prototype.__analyseScales=function(){this._createLayoutScales(this._encoding);for(var t=0,i=this._serieslist;t<i.length;t++)for(var n=0,a=i[t].scalePairs;n<a.length;n++){var r=a[n],o=r.filed,s=r.scale;"x"==o.name?s instanceof e.OrdinalScale&&!0===o.band?s.rangeBounds([this._rect.left,this._rect.right]):s.range([this._rect.left,this._rect.right]):"y"==o.name&&(s instanceof e.OrdinalScale?!0===o.band?s.rangeBounds([this._rect.bottom,this._rect.top]):s.range([this._rect.bottom,this._rect.top]):(s=e.LinearTicks.create(s).niceScale()).range([this._rect.bottom,this._rect.top]))}},i.prototype._createLayoutScales=function(t){if(this._serieslist.length>1)for(var e=0;e<this._serieslist.length;++e)for(var i=0,n=(c=this._serieslist[e]).scalePairs;i<n.length;i++){for(var a=(_=n[i]).filed,r=!1,o=0,s=this.__scalePairs;o<s.length;o++){var l=s[o];if(l.filed.equals(a)&&l.scale.equal(_.scale)){r=!0,l.series.push(c.name);break}}r||this.__scalePairs.push({series:[c.name],filed:a,scale:_.scale})}else if(1==this._serieslist.length)for(var c=this._serieslist[0],h=0,u=c.scalePairs;h<u.length;h++){var _=u[h];this.__scalePairs.push({series:[c.name],filed:_.filed,scale:_.scale})}},Object.defineProperty(i.prototype,"maxSeriesSize",{get:function(){var t=this._getScale("x");return t instanceof e.OrdinalScale?t.domains.length:e.Utility.max(this._serieslist.map(function(t,e,i){return t.size}))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scalePairs",{get:function(){return this.__scalePairs},enumerable:!0,configurable:!0}),i.prototype._getScale=function(t){var e=_.findIndex(this.__scalePairs,function(e){return e.filed.name==t});return this.__scalePairs[e].scale},i}(e.BaseLayout);i.CartesianLayout=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.graphics.Style,a=t.device.Default,r=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._rect.width/this.maxSeriesSize/(this._stack?1:this._serieslist.length)*.9},enumerable:!0,configurable:!0}),i.prototype._layoutSeries=function(t,i,r){this._serieslist.length;var o=t.getScale("x"),s=t.getScale("y"),l=t.getScale("color"),c=[];l instanceof e.OrdinalScale&&(l=l.clone(),c=e.ColorUtils.gradientColor(l.startPosition,l.endPosition,l.domains.length),l.range([0,l.domains.length-1]));for(var h=e.ColorUtils.indexColor(t.index),u=0,_=t.points;u<_.length;u++){var p=_[u];if(null!=p){var f=p.x,d=p.y,y=p.color,g=(p.shape,p.size,p.tooltip,p.text),m=o.getScaleValue(f.value)+(this._stack?0:(i-(this._serieslist.length-1)/2)*this.barWidth),v=d.isMultiple?d.value[0]:s.min<0?0:s.min,b=d.isMultiple?d.value[1]:d.value,w=s.getScaleValue(b),S=h;l instanceof e.OrdinalScale?S=c[l.getScaleValue(y.value)]:l instanceof e.LinearScale&&(S=e.ColorUtils.getColor(l.startPosition,l.endPosition,y.value,l.min,l.max));var x=s.getScaleValue(v),P=m-this.barWidth/2,T=m+this.barWidth/2,A=new e.BarShape(P,w,T-P,x-w);if(A.style=new n("gray",a.strokestyle),A.style.background=null!=S?S:h,t.showlabels&&null!=g){var L=g.value,M=a.font;M.fontColor="black",M.fontSize=12;var O=r.measureString(L,M),k=O.width,C=O.height;A.label=new e.Label(L,(P+T)/2,w-C/2-3,k,C,0,5),A.label._font=M,A.label.background=a.style,A.label.background.strokeStyle.strokeColor="white",A.label.background.background="white"}this.__shapelist.push(A)}}},i}(i.CartesianLayout);i.BarLayout=r}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"barWidth",{get:function(){return this._rect.width/this.maxSeriesSize/(this._stack?1:this._serieslist.length)*.9},enumerable:!0,configurable:!0}),i.prototype._layoutSeries=function(t,i,a){this._serieslist.length;var r=t.getScale("x"),o=t.getScale("y"),s=t.getScale("color"),l=t.getScale("size"),c=e.ColorUtils.indexColor(t.index),h=[];if(s instanceof e.OrdinalScale)if(null==(s=s.clone()).startPosition||null==s.endPosition)for(var u=s.domains.length,_=0;_<u;++_)s.ranges.push(e.ColorUtils.Color[_&e.ColorUtils.Color.length]);else h=e.ColorUtils.gradientColor(s.startPosition,s.endPosition,s.domains.length),s.range([0,s.domains.length-1]);for(var p=0,f=t.points;p<f.length;p++){var d=f[p];if(null!=d){var y=d.x,g=d.y,m=d.color,v=(d.shape,d.size),b=(d.tooltip,d.text),w=r.getScaleValue(y.value),S=o.getScaleValue(g.isMultiple?g.value[1]:g.value),x=l.getScaleValue(v.value);(isNaN(x)||null==x||x<=0)&&(x=10);var P=c;s instanceof e.OrdinalScale?P=h[s.getScaleValue(m.value)]:s instanceof e.LinearScale&&(P=e.ColorUtils.getColor(s.startPosition,s.endPosition,m.value,s.min,s.max));var T=new e.ScatterShape(w-x/2,S-x/2,x,x,n.style);if(T.style.background=null!=P?P:c,t.showlabels&&null!=b){var A=b.value,L=n.font;L.fontColor="black",L.fontSize=12;var M=a.measureString(A,L),O=M.width,k=M.height;T.label=new e.Label(A,w,S-x/2-3,O,k,0,3),T.label.background=n.style,T.label._font=L,T.label.background.strokeStyle.strokeColor="gray",T.label.background.background="lightblue"}this.__shapelist.push(T)}}},i.prototype._layoutLine=function(){},i}(i.CartesianLayout);i.ScatterLayout=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){var e=t.call(this)||this;return e.barStyle=n.style,e.lineStyle=n.strokestyle,e._locationCache=[],e._stack=!1,e}return __extends(i,t),i.prototype.convert=function(t,e,i,n,a,r,o,s){this.__shapelist.length=0,this._serieslist=[];for(var l=0,c=t;l<c.length;l++){var h=c[l];this._serieslist.push(h.clone())}this._encoding=e,this._locationCache=[],this.__scalePairs=[],this._stack=e._stack,this._cx=i,this._cy=n,this._innerRadius=a,this._radius=r,this._startAngle=o,this._endAngle=s,this.__analyseScales();for(var u=0;u<this._serieslist.length;++u)this._layoutSeries(this._serieslist[u],u);return this.__shapelist},i.prototype.__analyseScales=function(){this._createLayoutScales(this._encoding);for(var t=0,i=this._serieslist;t<i.length;t++)for(var n=0,a=i[t].scalePairs;n<a.length;n++){var r=a[n],o=r.filed,s=r.scale;"x"==o.name?s instanceof e.OrdinalScale&&!0===o.band?s.rangeBounds([this._innerRadius,this._radius]):s.range([this._innerRadius,this._radius]):"y"==o.name&&(s instanceof e.OrdinalScale?!0===o.band?s.rangeBounds([this._startAngle,this._endAngle]):s.range([this._startAngle,this._endAngle]):(s=e.LinearTicks.create(s).niceScale()).range([this._startAngle,this._endAngle]))}},i.prototype._createLayoutScales=function(t){if(this._serieslist.length>1)for(var e=0;e<this._serieslist.length;++e)for(var i=0,n=(c=this._serieslist[e]).scalePairs;i<n.length;i++){for(var a=(_=n[i]).filed,r=!1,o=0,s=this.__scalePairs;o<s.length;o++){var l=s[o];if(l.filed.equals(a)&&l.scale.equal(_.scale)){r=!0,l.series.push(c.name);break}}r||this.__scalePairs.push({series:[c.name],filed:a,scale:_.scale})}else if(1==this._serieslist.length)for(var c=this._serieslist[0],h=0,u=c.scalePairs;h<u.length;h++){var _=u[h];this.__scalePairs.push({series:[c.name],filed:_.filed,scale:_.scale})}},Object.defineProperty(i.prototype,"maxSeriesSize",{get:function(){var t=this._getScale("x");return t instanceof e.OrdinalScale?t.domains.length:e.Utility.max(this._serieslist.map(function(t,e,i){return t.size}))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scalePairs",{get:function(){return this.__scalePairs},enumerable:!0,configurable:!0}),i.prototype._getScale=function(t){var e=_.findIndex(this.__scalePairs,function(e){return e.filed.name==t});return this.__scalePairs[e].scale},i}(e.BaseLayout);i.RadialCartesianLayout=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.graphics.Style,a=t.device.Default,r=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"barWidth",{get:function(){return(this._radius-this._innerRadius)/this.maxSeriesSize/(this._stack?1:this._serieslist.length)*.9},enumerable:!0,configurable:!0}),i.prototype._layoutSeries=function(t,i){this._serieslist.length;var r=t.getScale("x"),o=t.getScale("y"),s=t.getScale("color"),l=[];s instanceof e.OrdinalScale&&(s=s.clone(),l=e.ColorUtils.gradientColor(s.startPosition,s.endPosition,s.domains.length),s.range([0,s.domains.length-1]));for(var c=e.ColorUtils.indexColor(t.index),h=0,u=t.points;h<u.length;h++){var _=u[h];if(null!=_){var p=_.x,f=_.y,d=_.color,y=(_.shape,_.size,r.getScaleValue(p.value)+(this._stack?0:(i-(this._serieslist.length-1)/2)*this.barWidth)),g=f.isMultiple?f.value[0]:o.min<0?0:o.min,m=f.isMultiple?f.value[1]:f.value,v=o.getScaleValue(m),b=c;s instanceof e.OrdinalScale?b=l[s.getScaleValue(d.value)]:s instanceof e.LinearScale&&(b=e.ColorUtils.getColor(s.startPosition,s.endPosition,d.value,s.min,s.max));var w=o.getScaleValue(g),S=y-this.barWidth/2,x=y+this.barWidth/2,P=new e.RadialBarShape(this._cx,this._cy,S,x,w,v-w);P.style=new n("gray",a.strokestyle),P.style.background=null!=b?b:c,this.__shapelist.push(P)}}},i}(i.RadialCartesianLayout);i.RadialBarLayout=r}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._layoutSeries=function(t,i){this._serieslist.length;for(var a=t.getScale("x"),r=t.getScale("y"),o=(t.getScale("color"),[]),s=[],l=0,c=t.points;l<c.length;l++){var h=c[l];if(null!=h){console.log(h);var u=h.x,_=h.y,p=(h.color,h.shape,h.size,a.getScaleValue(u.value)),f=r.getScaleValue(_.isMultiple?_.value[1]:_.value),d=this._cx+Math.cos(f)*p,y=this._cy+Math.sin(f)*p;o.push(d),s.push(y)}}var g=new e.LinesShape(o,s,null,n.strokestyle);g.strokeStyle.strokeColor=e.ColorUtils.indexColor(t.index),this.__shapelist.push(g)},i.prototype._layoutLine=function(){},i}(i.RadialCartesianLayout);i.RadialLineLayout=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._layoutSeries=function(t,i){this._serieslist.length;for(var a=t.getScale("x"),r=t.getScale("y"),o=(t.getScale("color"),[]),s=[],l=0,c=t.points;l<c.length;l++){var h=c[l];if(null!=h){console.log(h);var u=h.x,_=h.y,p=(h.color,h.shape,h.size,a.getScaleValue(u.value)),f=_.isMultiple?_.value[0]:r.min<0?0:r.min,d=_.isMultiple?_.value[1]:_.value,y=r.getScaleValue(f),g=r.getScaleValue(d),m=this._cx+Math.cos(y)*p,v=this._cy+Math.sin(y)*p,b=this._cx+Math.cos(g)*p,w=this._cy+Math.sin(g)*p;o.push(b),s.push(w),o.unshift(m),s.unshift(v)}}var S=new e.AreaShape(o,s,null,n.strokestyle);S.style.background=e.ColorUtils.indexColor(t.index),this.__shapelist.push(S)},i.prototype._layoutLine=function(){},i}(i.RadialCartesianLayout);i.RadialAreaLayout=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),Object.defineProperty(i.prototype,"barWidth",{get:function(){return(this._radius-this._innerRadius)/this.maxSeriesSize/(this._stack?1:this._serieslist.length)*.9},enumerable:!0,configurable:!0}),i.prototype._layoutSeries=function(t,i){this._serieslist.length;var a=t.getScale("x"),r=t.getScale("y"),o=t.getScale("color"),s=t.getScale("size"),l=e.ColorUtils.indexColor(t.index),c=[];o instanceof e.OrdinalScale&&(o=o.clone(),c=e.ColorUtils.gradientColor(o.startPosition,o.endPosition,o.domains.length),o.range([0,o.domains.length-1]));for(var h=0,u=t.points;h<u.length;h++){var _=u[h];if(null!=_){var p=_.x,f=_.y,d=_.color,y=(_.shape,_.size),g=a.getScaleValue(p.value),m=r.getScaleValue(f.isMultiple?f.value[1]:f.value),v=s.getScaleValue(y.value);(isNaN(v)||null==v||v<=0)&&(v=10),console.log("radius "+g+" angle "+m);var b=l;o instanceof e.OrdinalScale?b=c[o.getScaleValue(d.value)]:o instanceof e.LinearScale&&(b=e.ColorUtils.getColor(o.startPosition,o.endPosition,d.value,o.min,o.max));var w=this._cx+Math.cos(m)*g,S=this._cy+Math.sin(m)*g,x=new e.ScatterShape(w-v/2,S-v/2,v,v,n.style);x.style.background=null!=b?b:l,this.__shapelist.push(x)}}},i.prototype._layoutLine=function(){},i}(i.RadialCartesianLayout);i.RadialScatterLayout=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._layoutSeries=function(t,i){this._serieslist.length;for(var a=t.getScale("x"),r=t.getScale("y"),o=[],s=[],l=(e.ColorUtils.indexColor(t.index),0),c=t.points;l<c.length;l++){var h=c[l];if(null!=h){var u=h.x,_=h.y,p=(h.color,h.shape,h.size,a.getScaleValue(u.value)),f=_.isMultiple?_.value[1]:_.value;f=r.getScaleValue(f),o.push(p),s.push(f)}}var d=new e.LinesShape(o,s,null,n.strokestyle);d.strokeStyle.strokeColor=e.ColorUtils.indexColor(t.index),d.style.strokeStyle=null,this.__shapelist.push(d)},i.prototype._layoutLine=function(){},i}(i.CartesianLayout);i.LineLayout=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._layoutSeries=function(t,i){this._serieslist.length;for(var a=t.getScale("x"),r=t.getScale("y"),o=(t.getScale("color"),[]),s=[],l=0,c=t.points;l<c.length;l++){var h=c[l];if(null!=h){var u=h.x,_=h.y,p=(h.color,h.shape,h.size,a.getScaleValue(u.value)),f=_.isMultiple?_.value[0]:r.min<0?r.max<0?r.max:0:r.min,d=_.isMultiple?_.value[1]:_.value;f=r.getScaleValue(f),d=r.getScaleValue(d),o.push(p),s.push(f),o.unshift(p),s.unshift(d)}}var y=new e.AreaShape(o,s,null,n.strokestyle);y.style.background=e.ColorUtils.indexColor(t.index),y.style.strokeStyle=null,this.__shapelist.push(y)},i.prototype._layoutLine=function(){},i}(i.CartesianLayout);i.AreaLayout=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function e(){var e=t.call(this)||this;return e._rect=null,e._depth=0,e._offset=1,e.style=n.style,e.lineStyle=n.strokestyle,e._depth=0,e}return __extends(e,t),e.prototype._calcDeep=function(t){this._depth=0,this._depth=this.__calcDeep(t)+1},e.prototype.__calcDeep=function(t){if(null!=t&&t.length>0){for(var e=0,i=0,n=t;i<n.length;i++){var a=n[i],r=this.__calcDeep(a.children);a._hidden=!1,e<r&&(e=r)}return++e}return 0},e}(e.BaseLayout);i.HierarchicalLayout=a}(e.hierarchical||(e.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(e,i,n){var a=t.call(this)||this;return a.__startAngle=e,a.__innerRadius=n,a.__sweep=i,a}return __extends(i,t),i.prototype.convert=function(t,e,i,n){this._calcDeep(t),this.__cx=(i.left+i.right)/2,this.__cy=(i.top+i.bottom)/2,this.__radius=i.width<i.height?i.width/2:i.height/2,this.__radiusUnit=(this.__radius-this.__innerRadius-this._offset)/(this._depth-1);var a=new r(t,this.__cx,this.__cy,this.__startAngle,this.__sweep+this.__startAngle,this.__innerRadius,this.__innerRadius+this.__radiusUnit,0,0);return this.__calcSum(a),this.__preangle=a.sweep/a.sum,this.__layoutItems(a,n),null},i.prototype.__layoutItems=function(t,i){for(var a=t.startAngle,o=0;o<t.vs.length;++o){var s=t.vs[o],l=s.size.value*this.__preangle,c=t.cx,h=t.cy;0==t.depth&&(c=t.cx+this._offset*Math.cos(a+l/2),h=t.cy+this._offset*Math.sin(a+l/2));var u=new e.SunburstShape(c,h,t.innerRadius,t.radius,a,l,n.style,n.strokestyle);if(u.style.background=e.ColorUtils.indexColor(parseInt(s._id)),u.id=s._id,u.text=s.text.value,this.__shapelist.push(u),s.children&&s.children.length>0){var _=new r(s.children,c,h,a,a+l,t.radius,t.radius+this.__radiusUnit,0,t.depth+1);this.__calcSum(_),this.__layoutItems(_,i)}a+=l}},i.prototype.__calcSum=function(t){for(var e=0,i=0,n=t.vs;i<n.length;i++){var a=n[i];e+=null==a.size.value||isNaN(a.size.value)?0:a.size.value}t.sum=e},i}(i.HierarchicalLayout);i.SunburstLayout=a;var r=function(){function t(t,e,i,n,a,r,o,s,l){this.vs=t,this.startAngle=n,this.endAngle=a,this.innerRadius=r,this.radius=o,this.sum=s,this.depth=l,this.cx=e,this.cy=i}return Object.defineProperty(t.prototype,"sweep",{get:function(){return this.endAngle-this.startAngle},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){return this.radius-this.innerRadius},enumerable:!0,configurable:!0}),t}()}(e.hierarchical||(e.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.graphics.Rect,a=t.device.Default,r=t.graphics.Util,o=t.view.ViewState,s=function(t){function i(e){var i=t.call(this)||this;return i._limited=500,i._rect=e,i}return __extends(i,t),i.prototype.convert=function(t,e,i,n){this.__shapelist=[],this._calcDeep(t);var a=new l(t,i.left,i.top,i.right,i.bottom,0,0);return this.__calcSum(a),this.__hideSmallNode(a),this.__layoutItems(a,n),this.__shapelist},i.prototype.__hideSmallNode=function(t){if(null!=t&&null!=t.vs&&t.vs.length>0){var e=t.area/t.sum;t.vs.sort(function(t,e){return t.size.value-e.size.value});t.vs.length;for(var i=0,n=t.vs;i<n.length;i++){var a=n[i];a.size.value*e<this._limited&&(a._hidden=!0,t.sum-=a.size.value,e=t.area/t.sum)}}},i.prototype.__calcSum=function(t){for(var e=0,i=0,n=t.vs;i<n.length;i++)e+=n[i].size.value;t.sum=e},i.prototype.__layoutItems=function(t,i){if(!(t.sum<=0)){var s=new n(t.l,t.t,t.r,t.b),c=t.area/t.sum;t.vs.sort(function(t,e){return e.size.value-t.size.value});for(var h=0;h<t.vs.length&&!s.isNil;){var u=this.__locationRects(t.vs,h,c,s),_=r.union.apply(r,u);s=this.__clipRect(_,s);for(var p=0;p<u.length;++p){var f=u[p],d=t.vs[h],y=new e.CubeShape(f.left,f.top,f.width,f.height,a.style,a.strokestyle);if(y.visiable=o.Visiable,y.style.background=e.ColorUtils.indexColor(parseInt(d._id)),y.id=d._id,y.text=d.text.value,d._hidden)h++;else{if(d.children&&d.children.length>0){var g=0;!isNaN(this._offset)&&this._offset>0&&(g=(this._depth-t.depth)/this._depth*this._offset),f=new n(f.left+g,f.top+g,f.right-g,f.bottom-g);var m=new l(d.children,f.left,f.top,f.left+f.width,f.top+f.height,d.size.value,t.depth+1);this.__calcSum(m),this.__hideSmallNode(m),m.sum>0&&(y.visiable=o.InVisiable,this.__layoutItems(m,i))}this.__shapelist.push(y),++h}}}}},i.prototype.__locationRects=function(t,e,i,a){for(var r=[],o=0,s=0,l=e;l<t.length;++l){var c=t[l],h=void 0,u=0;if(c.size.value<0&&(t.splice(l,1),c=t[l]),a.height<a.width){if(s+=c.size.value,h=s*i/a.height,u=t[e].size.value*i/h,0!=o){f=u>h?u/h:h/u;if(!(Math.abs(f-1)<Math.abs(o-1)))return r;o=f,r.length=0}else o=u>h?u/h:h/u;r.length=0;for(d=e;d<=l;d++){var _=void 0,p=t[d].size.value*i/h;_=d===e?new n(a.left,a.top,a.left+h,a.top+u):new n(r[d-e-1].left,r[d-e-1].bottom,r[d-e-1].left+h,p+r[d-e-1].bottom),r.push(_)}}else{if(s+=c.size.value,u=s*i/a.width,h=t[e].size.value*i/u,0!=o){var f=u>h?u/h:h/u;if(!(Math.abs(f-1)<Math.abs(o-1)))return r;o=f,r.length=0}else o=u>h?u/h:h/u;r.length=0;for(var d=e;d<=l;d++){var _=void 0,y=t[d].size.value*i/u;_=d===e?new n(a.left,a.top,a.left+h,a.top+u):new n(r[d-e-1].right,r[d-e-1].top,r[d-e-1].right+y,r[d-e-1].top+u),r.push(_)}}h,u}return r},i.prototype.__clipRect=function(t,e){return Math.abs(t.width-e.width)<=1e-4?new n(t.left,t.bottom,t.right,e.bottom):new n(t.right,t.top,e.right,t.bottom)},i}(i.HierarchicalLayout);i.TreeMapLayout=s;var l=function(){function t(t,e,i,n,a,r,o){this.vs=t,this.l=e,this.t=i,this.r=n,this.b=a,this.sum=r,this.depth=o}return Object.defineProperty(t.prototype,"w",{get:function(){return this.r-this.l},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){return this.b-this.t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"area",{get:function(){return this.w*this.h},enumerable:!0,configurable:!0}),t}()}(e.hierarchical||(e.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";var e=Math.sqrt(50),i=Math.sqrt(10),n=Math.sqrt(2),a=function(){function t(t){this._scale=t,this._ticks=[]}return t.create=function(t,e,i){return null},t.prototype._createTicks=function(t,e,i){var n,a,r,o=e<t,s=-1;if(o&&(n=t,t=e,e=n),0===(r=this._tickIncrement(t,e,i))||!isFinite(r))return[];if(r>0)for(t=Math.ceil(t/r),e=Math.floor(e/r),a=new Array(n=Math.ceil(e-t+1));++s<n;)a[s]=(t+s)*r;else for(t=Math.floor(t*r),e=Math.ceil(e*r),a=new Array(n=Math.ceil(t-e+1));++s<n;)a[s]=(t-s)/r;return o&&a.reverse(),a},t.prototype._tickIncrement=function(t,a,r){var o=(a-t)/Math.max(0,r),s=Math.floor(Math.log(o)/Math.LN10),l=o/Math.pow(10,s);return s>=0?(l>=e?10:l>=i?5:l>=n?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(l>=e?10:l>=i?5:l>=n?2:1)},t.prototype._tickStep=function(t,a,r){var o=Math.abs(a-t)/Math.max(0,r),s=Math.pow(10,Math.floor(Math.log(o)/Math.LN10)),l=o/s;return l>=e?s*=10:l>=i?s*=5:l>=n&&(s*=2),a<t?-s:s},t}();t.Ticks=a}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.create=function(e){return t.Debug.assert(e instanceof t.LinearScale," scale must be LinearScale"),new i(e)},i.prototype.createTicks=function(t){return(null==t||isNaN(t))&&(t=10),this._ticks=this._createTicks(this._scale.max,this._scale.min,t),this._ticks},i.prototype.niceScale=function(){var t=this._scale,e=this._tickStep(t.min,t.max,10);0==e&&(e=1);var i=0===t.min?0:Math.floor(t.min/e)*e,n=(Math.floor(t.max/e)+1)*e;return t.domain([i,n]).refresh(),t},i}(t.Ticks);t.LinearTicks=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.create=function(e){return t.Debug.assert(e instanceof t.LogScale," scale must be LinearScale"),new i(e)},i.prototype.createTicks=function(t){return(null==t||isNaN(t))&&(t=10),this._ticks=this._createTicks(this._scale.max,this._scale.min,t),this._ticks},i}(t.Ticks);t.LogTicks=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict";var e=function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return __extends(i,e),i.create=function(e){return t.Debug.assert(e instanceof t.OrdinalScale," scale must be OrdinalScale"),new i(e)},i.prototype.createTicks=function(t){if(null!=t){this._ticks=[];var e=this._scale.domains;if(e.length/t<2)this._ticks=this._scale.domains;else for(var i=Math.floor(e.length/t),n=0;n<e.length;n+=i)this._ticks.push(e[n])}else this._ticks=this._scale.domains;return this._ticks},i}(t.Ticks);t.OrdinalTicks=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=function(t){function e(){var e=t.call(this)||this;return e._major=i.strokestyle.clone(),e._minor=i.strokestyle.clone(),e._lableFont=i.font.clone(),e._showLabel=!0,e}return __extends(e,t),e.prototype.onDraw=function(t){t.save();for(var e=[],i=[],n=this._lableRect.points,a=0;a<4;++a)e.push(n[a].x),i.push(n[a].y);t.drawLine(this._majorTick.startPoint,this._majorTick.endPoint,this._major),this._showLabel&&t.drawText(this._label,this._lableRect.leftTop,this._lableFont,this._lableRect.leftTop,180*this._lableRect.angle/Math.PI),t.drawLine(this._minorTick.startPoint,this._minorTick.endPoint,this._minor),t.restore()},e.prototype.refresh=function(){},e}(e.Shape);e.AxisShape=n}(t.test||(t.test={}))}(android||(android={}));var LABEL_PADDING=4,MAJOR_TICK_HEIGHT=6,MINOR_TICK_HEIGHT=4;!function(t){!function(e){!function(e){"use strict";var i=t.view.View,n=t.device.Default,a=function(t){function e(e){var i=t.call(this,e)||this;return i._majorTickHeight=MAJOR_TICK_HEIGHT,i._minorTickHeight=MINOR_TICK_HEIGHT,i._ticks=[],i._titleFont=n.font,i._labelFont=n.font,i._majorStyle=n.strokestyle,i._minorStyle=n.strokestyle,i._near=!0,i._labelFont.fontColor="#262626",i._series=[],i}return __extends(e,t),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"majorStyle",{get:function(){return this._majorStyle},set:function(t){this._majorStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minorStyle",{get:function(){return this._minorStyle},set:function(t){this._minorStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineStyle",{get:function(){return this._lineStyle},set:function(t){this._lineStyle=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleFont",{get:function(){return this._titleFont},set:function(t){this._titleFont=t.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelFont",{get:function(){return this._labelFont},set:function(t){this._labelFont=t.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"series",{get:function(){return this._series},set:function(t){this._series=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(t){null==t||t.equal(this._scale)?null==t&&(this._scale=null,this._ticks=[]):(this._scale=t,console.log("set scale "+t),this._ticks=this._createTicks())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reversed",{get:function(){return this._reversed},set:function(t){this._reversed=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._axisType},set:function(t){this._axisType=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"near",{get:function(){return this._near},set:function(t){this._near=t},enumerable:!0,configurable:!0}),e.prototype.onMeasure=function(e,i,n){return t.prototype.onMeasure.call(this,e,i,n)},e.prototype.onLayout=function(e,i,n,a,r){t.prototype.onLayout.call(this,e,i,n,a,r)},e.prototype.onDraw=function(e){t.prototype.onDraw.call(this,e)},e.prototype._format=function(t){return t+""},e}(i);e.BaseAxis=a}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.view.MeasureSpec,a=t.graphics.Size,r=t.graphics.Gravity,o=t.view.LayoutParams,s=t.graphics.Point,l=function(t){function l(e){var i=t.call(this,e)||this;return i._maxLabelSize=new a(0,0),i}return __extends(l,t),Object.defineProperty(l.prototype,"near",{get:function(){return this._near},set:function(t){this._near=t,t?this.type==i.AxisType.X?this.gravity=r.Bottom:this.type==i.AxisType.Y&&(this.gravity=r.Left):this.type==i.AxisType.X?this.gravity=r.Top:this.type==i.AxisType.Y&&(this.gravity=r.Right)},enumerable:!0,configurable:!0}),l.prototype._createTicks=function(){var t=[];return this.scale instanceof e.LinearScale?t=e.LinearTicks.create(this.scale).createTicks(10):this.scale instanceof e.LogScale?t=e.LogTicks.create(this.scale).createTicks(10):this.scale instanceof e.OrdinalScale&&(t=e.OrdinalTicks.create(this.scale).createTicks()).length>30&&(t=e.OrdinalTicks.create(this.scale).createTicks(30)),t},l.prototype._layoutXAxis=function(t){var i=this._ticks;this._children=[];for(var n,a=0;i&&a<i.length;++a){var r=i[a],o=a>=i.length?null:i[a+1],s=Math.max(this._majorTickHeight,this._minorTickHeight),l=this._format(r),c=t.measureString(l,this.labelFont),h=this.scale.getScaleValue(r),u=this.layoutInfo.innerrect.top,_=NaN;null!=o&&(_=this.scale.getScaleValue(o),u);var p=h,f=u+s+LABEL_PADDING+c.height/2,d=new e.AxisShape;d._lableRect=new e.RotateRect(p,f,c.width,c.height,0),d._majorTick=new e.RotateLine(h,u,this._majorTickHeight,0,0),d._label=l,d._lableFont=this._labelFont,d._major=this.majorStyle,d._minor=this.minorStyle;var y=NaN;isNaN(_)||(y=(h+_)/2),d._minorTick=new e.RotateLine(y,u,this._minorTickHeight,0,0),null!=n&&e.Utility.isMixedRotatedRect(d._lableRect,n._lableRect)?d._showLabel=!1:(d._showLabel=!0,n=d),this._children.push(d)}},l.prototype._layoutYAxis=function(t){var i=this._ticks;this._children=[];for(var n=0;i&&n<i.length;++n){var a=i[n],r=n>=i.length?null:i[n+1],o=Math.max(this._majorTickHeight,this._minorTickHeight),s=this._format(a),l=t.measureString(s,this.labelFont),c=this.scale.getScaleValue(a),h=this.layoutInfo.innerrect.right;this.near||(h=this.layoutInfo.innerrect.left);var u=NaN;null!=r&&(u=this.scale.getScaleValue(r),h);var _=h-l.width/2-LABEL_PADDING-o,p=c;this.near||(_=h+l.width/2+LABEL_PADDING+o);var f=new e.AxisShape;f._lableRect=new e.RotateRect(_,p,l.width,l.height,0),f._majorTick=new e.RotateLine(h,c,this._majorTickHeight,0,this.near?Math.PI/2:-Math.PI/2),f._label=s,f._lableFont=this.labelFont,f._major=this.majorStyle,f._minor=this.minorStyle;var d=NaN;isNaN(u)||(d=(c+u)/2),f._minorTick=new e.RotateLine(h,d,this._minorTickHeight,0,this.near?Math.PI/2:-Math.PI/2),this._children.push(f)}},l.prototype.onMeasure=function(e,r,s){var l=null;return this._axisType==i.AxisType.X?(l=new a(e.value,this._measureX(s)),this.setMeasuredDimension(new n(l.width,o.EXACTLY),new n(l.height,o.EXACTLY)),l):this._axisType==i.AxisType.Y?(l=new a(this._measureY(s),r.value),this.setMeasuredDimension(new n(l.width,o.EXACTLY),new n(l.height,o.EXACTLY)),l):t.prototype.onMeasure.call(this,e,r,s)},l.prototype._measureX=function(t){for(var e=t.measureString(this.title,this.titleFont),i=Math.max(this._majorTickHeight,this._minorTickHeight),n=new a(0,0),r=0,o=this._ticks;r<o.length;r++){var s=o[r],l=t.measureString(this._format(s),this.labelFont);n.width=Math.max(l.width,n.width),n.height=Math.max(l.height,n.height)}return this._maxLabelSize=n.clone(),n.height+e.height+i},l.prototype._measureY=function(t){for(var e=t.measureString(this.title,this.titleFont),i=Math.max(this._majorTickHeight,this._minorTickHeight),n=new a(0,0),r=0,o=this._ticks;r<o.length;r++){var s=o[r],l=t.measureString(this._format(s),this.labelFont);n.width=Math.max(l.width,n.width),n.height=Math.max(l.height,n.height)}return this._maxLabelSize=n.clone(),n.width+e.height+i},l.prototype.onLayout=function(e,n,a,r,o){t.prototype.onLayout.call(this,e,n,a,r,o),null!=this.scale&&(this._axisType===i.AxisType.X?this._layoutXAxis(o):this._axisType==i.AxisType.Y&&this._layoutYAxis(o))},l.prototype.onDraw=function(e){if(t.prototype.onDraw.call(this,e),this._drawLine(e),null!=this._children)for(var i=0,n=this._children;i<n.length;i++)n[i].onDraw(e)},l.prototype._drawLine=function(t){var e=this.layoutInfo.innerrect;this._axisType==i.AxisType.X?this._near?t.drawLine(new s(e.left,e.top),new s(e.right,e.top),this.lineStyle):t.drawLine(new s(e.left,e.bottom),new s(e.right,e.bottom),this.lineStyle):this._axisType==i.AxisType.Y&&(this._near?t.drawLine(new s(e.right,e.top),new s(e.right,e.bottom),this.lineStyle):t.drawLine(new s(e.left,e.top),new s(e.left,e.bottom),this.lineStyle))},l}(i.BaseAxis);i.LineAxis=l}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.view.MeasureSpec,a=t.graphics.Size,r=t.graphics.Gravity,o=t.view.LayoutParams,s=t.graphics.Point,l=t.device.Default,c=function(t){function c(e){var i=t.call(this,e)||this;return i.__innerRadius=0,i.__startAngle=0,i.__sweep=0,i.__radius=0,i.__cx=0,i.__cy=0,i.__innerRadius=0,i._lineStyle=l.strokestyle,i}return __extends(c,t),Object.defineProperty(c.prototype,"near",{get:function(){return this._near},set:function(t){this._near=t,t?this.type==i.AxisType.X?this.gravity=r.Bottom:this.type==i.AxisType.Y&&(this.gravity=r.Left):this.type==i.AxisType.X?this.gravity=r.Top:this.type==i.AxisType.Y&&(this.gravity=r.Right)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_cx",{get:function(){return this.__cx},set:function(t){this.__cx=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_cy",{get:function(){return this.__cy},set:function(t){this.__cy=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_radius",{get:function(){return this.__radius},set:function(t){this.__radius=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_innerRadius",{get:function(){return this.__innerRadius},set:function(t){this.__innerRadius=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_startAngle",{get:function(){return this.__startAngle},set:function(t){this.__startAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"_sweep",{get:function(){return this.__sweep},set:function(t){this.__sweep=t},enumerable:!0,configurable:!0}),c.prototype._createTicks=function(){var t=[];return this.scale instanceof e.LinearScale?t=e.LinearTicks.create(this.scale).createTicks(10):this.scale instanceof e.LogScale?t=e.LogTicks.create(this.scale).createTicks(10):this.scale instanceof e.OrdinalScale&&(t=e.OrdinalTicks.create(this.scale).createTicks()),t},c.prototype._layoutXAxis=function(t){var i=this._ticks;this._children=[];for(var n=0;i&&n<i.length;++n){var a=i[n],r=n>=i.length?null:i[n+1],o=Math.max(this._majorTickHeight,this._minorTickHeight),s=this._format(a),l=t.measureString(s,this.labelFont),c=this.scale.getScaleValue(a),h=this._cx+Math.cos(this._startAngle)*c,u=this._cy+Math.sin(this._startAngle)*c,_=NaN;if(null!=r){var p=this.scale.getScaleValue(r);_=this._cx+Math.cos(this._startAngle)*p,this._cy+Math.sin(this._startAngle)*p}Math.sin(this._startAngle),l.height,Math.cos(this._startAngle),l.height;var f=h,d=u+o+LABEL_PADDING+l.height/2,y=new e.AxisShape;y._lableRect=new e.RotateRect(f,d,l.width,l.height,0),y._majorTick=new e.RotateLine(h,u,this._majorTickHeight,0,this._startAngle),y._label=s,y._lableFont=this._labelFont,y._major=this.majorStyle,y._minor=this.minorStyle;var g=NaN,m=NaN,v=NaN;isNaN(_)||(v=this.scale.getScaleValue((a+r)/2),g=this._cx+Math.cos(this._startAngle)*v,m=this._cy+Math.sin(this._startAngle)*v),y._minorTick=new e.RotateLine(g,m,this._minorTickHeight,0,this._startAngle),this._children.push(y)}},c.prototype._layoutYAxis=function(t){var i=this._ticks;this._children=[];for(var n=0;i&&n<i.length;++n){var a=i[n],r=n>=i.length?null:i[n+1],o=Math.max(this._majorTickHeight,this._minorTickHeight),s=this._format(a),l=t.measureString(s,this.labelFont),c=this.scale.getScaleValue(a),h=this._cx+Math.cos(c)*this._radius,u=this._cy+Math.sin(c)*this._radius,_=NaN;if(null!=r){var p=this.scale.getScaleValue(r);this._cx+Math.cos(p)*this._radius,_=this._cy+Math.sin(p)*this._radius}var f=this._cx+Math.cos(c)*(this._radius+o+LABEL_PADDING+l.height/2),d=this._cy+Math.sin(c)*(this._radius+o+LABEL_PADDING+l.height/2),y=new e.AxisShape;y._lableRect=new e.RotateRect(f,d,l.width,l.height,0),y._majorTick=new e.RotateLine(h,u,this._majorTickHeight,0,c-Math.PI/2),y._label=s,y._lableFont=this.labelFont,y._major=this.majorStyle,y._minor=this.minorStyle;var g=NaN,m=NaN,v=NaN;isNaN(_)||(v=this.scale.getScaleValue((r+a)/2),m=this._cx+Math.cos(v)*this._radius,g=this._cy+Math.sin(v)*this._radius),y._minorTick=new e.RotateLine(m,g,this._minorTickHeight,0,v-Math.PI/2),this._children.push(y)}},c.prototype.onMeasure=function(e,r,s){var l=null;return this._axisType==i.AxisType.X?(l=new a(e.value,this._measureX(s)),this.setMeasuredDimension(new n(l.width,o.EXACTLY),new n(l.height,o.EXACTLY)),l):this._axisType==i.AxisType.Y?(l=new a(this._measureY(s),r.value),this.setMeasuredDimension(new n(l.width,o.EXACTLY),new n(l.height,o.EXACTLY)),l):t.prototype.onMeasure.call(this,e,r,s)},c.prototype._measureX=function(t){for(var e=t.measureString(this.title,this.titleFont),i=Math.max(this._majorTickHeight,this._minorTickHeight),n=new a(0,0),r=0,o=this._ticks;r<o.length;r++){var s=o[r],l=t.measureString(this._format(s),this.labelFont);n.width=Math.max(l.width,n.width),n.height=Math.max(l.height,n.height)}return n.height+e.height+i},c.prototype._measureY=function(t){for(var e=t.measureString(this.title,this.titleFont),i=Math.max(this._majorTickHeight,this._minorTickHeight),n=new a(0,0),r=0,o=this._ticks;r<o.length;r++){var s=o[r],l=t.measureString(this._format(s),this.labelFont);n.width=Math.max(l.width,n.width),n.height=Math.max(l.height,n.height)}return n.width+e.height+i},c.prototype.onLayout=function(e,n,a,r,o){t.prototype.onLayout.call(this,e,n,a,r,o),null!=this.scale&&(this._axisType===i.AxisType.X?this._layoutXAxis(o):this._axisType==i.AxisType.Y&&this._layoutYAxis(o))},c.prototype.onDraw=function(e){if(t.prototype.onDraw.call(this,e),this._drawLine(e),null!=this._children)for(var i=0,n=this._children;i<n.length;i++)n[i].onDraw(e)},c.prototype._drawLine=function(t){this.layoutInfo.innerrect;if(this._axisType==i.AxisType.X){var e=this._cx+Math.cos(this.__startAngle)*this._radius,n=this._cy+Math.sin(this.__startAngle)*this._radius,a=this._cx+Math.cos(this.__startAngle)*this.__innerRadius*this._radius,r=this._cy+Math.sin(this.__startAngle)*this._innerRadius*this._radius;t.drawLine(new s(a,r),new s(e,n),this.lineStyle)}else if(this._axisType==i.AxisType.Y){var o=l.style;o.strokeStyle=this.lineStyle,t.drawDonut(this._cx,this._cy,this._radius,this._radius-this.lineStyle.strokeWidth,this._startAngle/Math.PI*180,180*this._sweep/Math.PI,o)}},c}(i.BaseAxis);i.RadialLineAxis=c}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),Object.defineProperty(e.prototype,"layout",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.beginChartAnimation=function(){},e}(t.view.ViewGroup);e.BasePlot=i}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){var n=t.graphics.Rect,a=t.device.Default,r=t.view.animation.Animation,o=t.view.animation.BounceAnimationEase,s=function(t){function s(e,i){var n=t.call(this,e)||this;return n.__shapeList=[],n._datamodel=i,n._layouts=[],n.__scalePairs=[],n._animation=new r,n._animation.duration=500,n._animation.ease=new o,n}return __extends(s,t),s.prototype.onMeasure=function(e,i,n){return t.prototype.onMeasure.call(this,e,i,n)},s.prototype.onLayout=function(a,r,o,s,l){if(t.prototype.onLayout.call(this,a,r,o,s,l),this.islayoutChanged){this.removeAllViews(),this.__shapeList=[],this.__scalePairs=[],this._layouts.length=0;for(var c=this._datamodel.encoding._radial,h=0,u=this._datamodel.chartTypes;h<u.length;h++)switch(u[h]){case e.ChartType.Bar:if(c){var p=new i.RadialBarLayout,f=(a+o)/2,d=(s+r)/2,y=(o-a<s-r?o-a:s-r)/2,g=0,m=i.StartAngle,v=2*Math.PI+m;p.convert(this._datamodel.getSeriesByType(e.ChartType.Bar),this._datamodel.encoding,f,d,g,y,m,v),this.__shapeList=this.__shapeList.concat(p.shapeList),this._layouts.push(p)}else(p=new i.BarLayout).convert(this._datamodel.getSeriesByType(e.ChartType.Bar),this._datamodel.encoding,new n(a,r,o,s),l),this.__shapeList=this.__shapeList.concat(p.shapeList),this._layouts.push(p);break;case e.ChartType.Line:if(c){var b=new i.RadialLineLayout,f=(a+o)/2,d=(s+r)/2,y=(o-a<s-r?o-a:s-r)/2,g=0,m=i.StartAngle,v=2*Math.PI+m;b.convert(this._datamodel.getSeriesByType(e.ChartType.Line),this._datamodel.encoding,f,d,g,y,m,v),this.__shapeList=this.__shapeList.concat(b.shapeList),this._layouts.push(b)}else(b=new i.LineLayout).convert(this._datamodel.getSeriesByType(e.ChartType.Line),this._datamodel.encoding,new n(a,r,o,s),l),this.__shapeList=this.__shapeList.concat(b.shapeList),this._layouts.push(b);break;case e.ChartType.Scatter:if(c){var w=new i.RadialScatterLayout,f=(a+o)/2,d=(s+r)/2,y=(o-a<s-r?o-a:s-r)/2,g=0,m=i.StartAngle,v=2*Math.PI+m;w.convert(this._datamodel.getSeriesByType(e.ChartType.Scatter),this._datamodel.encoding,f,d,g,y,m,v),this.__shapeList=this.__shapeList.concat(w.shapeList),this._layouts.push(w)}else{var S=new i.ScatterLayout;S.convert(this._datamodel.getSeriesByType(e.ChartType.Scatter),this._datamodel.encoding,new n(a,r,o,s),l),this.__shapeList=this.__shapeList.concat(S.shapeList),this._layouts.push(S)}break;case e.ChartType.Area:if(c){var x=new i.RadialAreaLayout,f=(a+o)/2,d=(s+r)/2,y=(o-a<s-r?o-a:s-r)/2,g=0,m=i.StartAngle,v=2*Math.PI+m;x.convert(this._datamodel.getSeriesByType(e.ChartType.Area),this._datamodel.encoding,f,d,g,y,m,v),this.__shapeList=this.__shapeList.concat(x.shapeList),this._layouts.push(x)}else(x=new i.AreaLayout).convert(this._datamodel.getSeriesByType(e.ChartType.Area),this._datamodel.encoding,new n(a,r,o,s),l),this.__shapeList=this.__shapeList.concat(x.shapeList),this._layouts.push(x)}if(this.layouts.length>1)for(var P=0;P<this._layouts.length;++P)for(var T=this,A=0,L=this.layouts[P].scalePairs;A<L.length;A++)!function(t){var e=_.find(T.scalePairs,function(e){return e.filed.equals(t.filed)&&e.scale.equal(t.scale)});null==e?T.__scalePairs.push({series:[].concat(t.series),filed:t.filed,scale:t.scale}):e.series=e.series.concat(t.series)}(L[A]);else 1===this._layouts.length&&(this.__scalePairs=this._layouts[0].scalePairs);this._datamodel.encoding._radial||this._layoutLine(a,o);for(var M=0,O=this.__shapeList;M<O.length;M++){var k=O[M];this.addViewWithOutReLayout(k),k instanceof e.PlotShape&&null!=k.label&&this.addViewWithOutReLayout(k.label)}}},s.prototype._layoutLine=function(t,i){for(var n=[],r=0,o=this.layouts;r<o.length;r++)for(var s=0,l=o[r].scalePairs;s<l.length;s++){var c=l[s];if("y"==c.filed.name){var h=c.scale.getScaleValue(0);if(n.indexOf(h)<0){n.push(h);var u=new e.AxisLineShape(t,h,i,h,a.strokestyle);this.__shapeList.push(u)}}}},s.prototype.beginChartAnimation=function(){for(var t=500/this.children.length,i=this,n=0;n<this.children.length;++n)!function(n){var a=i.children[n];a instanceof e.ScatterShape?setTimeout(function(){console.log("index  "+n);var t=new e.ScatterAnimation(null);t.duration=500,t.from=.2,t.to=1,t.fillAfter=!1,a.startAnimation(t)},t*n):a instanceof e.BarShape?setTimeout(function(){var t=new e.BarAnimation(null);t.duration=1e3,t.from=.3,t.to=1,t.fillAfter=!1,a.startAnimation(t)},t*n):a instanceof e.AreaShape||a instanceof e.LinesShape?setTimeout(function(){var t=new e.AreaAnimation(null);t.duration=1e3,t.from=0,t.to=1,t.fillAfter=!1,a.startAnimation(t)},t*n):a instanceof e.RadialBarShape&&setTimeout(function(){var t=new e.SweepAnimation;t.duration=1e3,t.from=0,t.to=1,t.fillAfter=!1,a.startAnimation(t)},t*n)}(n)},s.prototype.__merageScale=function(){},s.prototype.onDraw=function(e){t.prototype.onDraw.call(this,e)},Object.defineProperty(s.prototype,"layouts",{get:function(){return this._layouts},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scalePairs",{get:function(){return this.__scalePairs},enumerable:!0,configurable:!0}),s}(e.BasePlot);i.CartesianPlot=s}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.view.MeasureSpec,a=t.graphics.Size,r=t.view.LayoutParams,o=t.widget.FrameLayout,s=t.graphics.Gravity;i.StartAngle=Math.PI;var l=function(t){function o(e,i,n){var a=t.call(this,e)||this;return a._option=i,a._chartType=n,a._axisList=[],a}return __extends(o,t),Object.defineProperty(o.prototype,"option",{get:function(){return this._option},set:function(t){this._option=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"chartType",{get:function(){return this._chartType},set:function(t){null!=t&&t!=this._chartType&&(this._chartType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"datamodel",{get:function(){return this._dataModel},set:function(t){this._dataModel=t,this._dataModel.encoding._radial?this._loadRadialView():this._loadView()},enumerable:!0,configurable:!0}),o.prototype._loadView=function(){for(var t=0,e=this.datamodel.scalePairs;t<e.length;t++){var n=e[t];if("y"==n.filed.name){var a=new i.LineAxis(this.getContext());a.type=i.AxisType.Y,a.layoutParams.height=r.MATCH_PARENT,a.layoutParams.width=100,a.near=!0,a.series=[].concat(n.series),this._axisList.push(a),this.addView(a)}}this._axisList.length>1&&(this._axisList[this._axisList.length-1].near=!1);var o=new i.CartesianPlot(this.getContext(),this.datamodel);o.layoutParams.width=r.MATCH_PARENT,o.layoutParams.height=r.MATCH_PARENT,this._plot=o,this.addView(o);var s=new i.LineAxis(this.getContext());s.type=i.AxisType.X,s.layoutParams.width=r.MATCH_PARENT,s.layoutParams.height=100,s.near=!0,this._axisList.push(s),this.addView(s)},o.prototype.beginChartAnimation=function(){this.plot.beginChartAnimation()},o.prototype._loadRadialView=function(){for(var t=0,e=this.datamodel.scalePairs;t<e.length;t++){var n=e[t];if("y"==n.filed.name){var a=new i.RadialLineAxis(this.getContext());a.type=i.AxisType.Y,a.layoutParams.height=r.MATCH_PARENT,a.layoutParams.width=r.MATCH_PARENT,a.near=!0,a.series=[].concat(n.series),this._axisList.push(a),this.addView(a)}}this._axisList.length>1&&(this._axisList[this._axisList.length-1].near=!1);var o=new i.CartesianPlot(this.getContext(),this.datamodel);o.layoutParams.width=r.MATCH_PARENT,o.layoutParams.height=r.MATCH_PARENT,this._plot=o,this.addView(o);var l=new i.RadialLineAxis(this.getContext());l.type=i.AxisType.X,l.gravity=s.Center,l.layoutParams.width=r.MATCH_PARENT,l.layoutParams.height=r.MATCH_PARENT,l.near=!0,this._axisList.push(l),this.addView(l)},o.prototype.onMeasure=function(o,s,l){var c=new a(0,0);if(this.datamodel.encoding._radial){for(var h=0,u=0,_=this._axisList;u<_.length;u++){w=(O=_[u]).onMeasure(o,s,l);O.type==i.AxisType.Y&&(h=w.width)}var p=o.getMeasureValue(),f=s.getMeasureValue(),d=p<f?p/2:f/2;d-=h;for(var y=i.StartAngle,g=2*Math.PI,m=0,v=this.children;m<v.length;m++){var b=v[m],w=new a(0,0);b instanceof i.BaseAxis?(b.type==i.AxisType.Y?w=b.onMeasure(new n(o.getMeasureValue(),r.EXACTLY),new n(s.getMeasureValue(),r.EXACTLY),l):b.type==i.AxisType.X&&b.onMeasure(o,s,l),b._innerRadius=0,b._startAngle=y,b._sweep=g,b._radius=d):b instanceof e.BasePlot&&(b.layoutParams.margin.marginLeft=h,b.layoutParams.margin.marginTop=h,b.layoutParams.margin.marginRight=h,b.layoutParams.margin.marginBottom=h,b.onMeasure(o,s,l))}}else{for(var S=0,x=0,P=0,T=0,A=[],L=0,M=this._axisList;L<M.length;L++){var O=M[L],w=O.onMeasure(o,s,l);O.type==i.AxisType.X?O.near?T=w.height:x=w.height:O.type==i.AxisType.Y&&(O.near?(S+=w.width,A.push(w.width)):(P+=w.width,A.push(w.width)))}for(var k=0,C=0,I=0,j=this.children;I<j.length;I++){var R=j[I],w=new a(0,0);R instanceof i.BaseAxis?R.type==i.AxisType.X?(R.layoutParams.margin.marginLeft=S,R.layoutParams.margin.marginRight=P,w=R.onMeasure(new n(o.getMeasureValue()-S-P,o.mode),s,l)):R.type==i.AxisType.Y&&(R.near?(R.layoutParams.margin.marginTop=x,R.layoutParams.margin.marginBottom=T,R.layoutParams.margin.marginLeft=k,k+=R.width,w=R.onMeasure(o,new n(s.getMeasureValue()-x-T,r.EXACTLY),l)):(R.layoutParams.margin.marginTop=x,R.layoutParams.margin.marginBottom=T,R.layoutParams.margin.marginRight=C,C+=R.width,w=R.onMeasure(o,new n(s.getMeasureValue()-x-T,r.EXACTLY),l))):R instanceof e.BasePlot?(R.layoutParams.margin.marginLeft=S,R.layoutParams.margin.marginRight=P,R.layoutParams.margin.marginTop=x,R.layoutParams.margin.marginBottom=T,w=R.onMeasure(o,s,l)):w=R.onMeasure(o,s,l),w.width>c.width&&(c.width=w.width),w.height>c.height&&(c.height=w.height)}}return t.prototype.onMeasure.call(this,o,s,l)},o.prototype.onLayout=function(t,e,n,a,r){this.layoutInfo.reset(t,e,n,a,this.padding,0);for(var o=0,s=this._axisList;o<s.length;o++)(h=s[o]).scale=null;this.layoutItem(this.plot,t,e,n,a,r);for(var l=0,c=this._axisList;l<c.length;l++){var h=c[l];if(h instanceof i.BaseAxis)if(h instanceof i.RadialLineAxis&&(h._cx=(t+n)/2,h._cy=(e+a)/2),h.type===i.AxisType.X)for(var u=0,p=this.plot.scalePairs;u<p.length;u++)"x"==(y=p[u]).filed.name&&(h.scale=y.scale);else for(var f=0,d=this.plot.scalePairs;f<d.length;f++){var y=d[f];"y"==y.filed.name&&0==_.xor(y.series,h.series).length&&(h.scale=y.scale)}this.layoutItem(h,t,n,e,a,r)}},Object.defineProperty(o.prototype,"plot",{get:function(){for(var t=0,e=this.children;t<e.length;t++){var n=e[t];if(n instanceof i.CartesianPlot)return n}},enumerable:!0,configurable:!0}),o.prototype.dispatchDraw=function(e){t.prototype.dispatchDraw.call(this,e)},o}(o);i.CartesianChart=l}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.graphics.Gravity,n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.__legends=[],e}return __extends(e,t),e.prototype.setMainLayout=function(t){this.__mainLayout=t,this.addView(t,0)},e.prototype.addLegend=function(t){this.__legends.push(t),this.addView(t,0)},e.prototype.onMeasure=function(e,n,a){t.prototype.onMeasure.call(this,e,n,a);for(var r=0,o=this.__legends;r<o.length;r++){var s=o[r];switch(s.gravity){case i.Left:this.__mainLayout.layoutParams.margin.marginLeft+=s.width+s.layoutParams.margin.marginLeft+s.layoutParams.margin.marginRight;break;case i.Right:this.__mainLayout.layoutParams.margin.marginRight+=s.width+s.layoutParams.margin.marginRight+s.layoutParams.margin.marginLeft;break;case i.Top:this.__mainLayout.layoutParams.margin.marginTop+=s.height+s.layoutParams.margin.marginTop+s.layoutParams.margin.marginBottom;break;case i.Bottom:this.__mainLayout.layoutParams.margin.marginBottom+=s.height+s.layoutParams.margin.marginBottom+s.layoutParams.margin.marginTop}}return t.prototype.onMeasure.call(this,e,n,a)},e.prototype.onLayout=function(e,i,n,a,r){t.prototype.onLayout.call(this,e,i,n,a,r)},e}(t.widget.RootView);e.BaseChartLayout=n}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){var n=t.graphics.Padding,a=t.graphics.Gravity,r=t.view.LayoutParams,o=t.graphics.RenderType,s=t.graphics.Util,l=function(t){function l(i){var n=t.call(this,i)||this;n.clip=!1;return window.EventHandler=function(t,i,a){if(console.log(" "+t.toString()+", type "+i+" , info "+a),i==e.ElementType.SeriesLegend){var r=n._dataModel.filter.series.indexOf(a.series);"enableseries"===a.action?(a.enable?r>-1&&n._dataModel.filter.series.splice(r,1):r<0&&n._dataModel.filter.series.push(a.series),n._dataModel.refresh(),n.setChart(),n.beginChartAnimation()):"showlabel"===a.action&&n.requestLayout()}},n}return __extends(l,t),l.prototype.attachElement=function(e,i,a){t.prototype.attachElement.call(this,e,s.asEnum(i,o)),this.padding=new n(20),this._dataModel=a,this.setChart()},l.prototype.beginChartAnimation=function(){this._chart.beginChartAnimation()},l.prototype.setChart=function(){if(this.removeAllViews(),this._chart=new i.CartesianChart(null,null,e.ChartType.Bar),this._chart.layoutParams.width=r.MATCH_PARENT,this._chart.layoutParams.height=r.MATCH_PARENT,this._chart.datamodel=this._dataModel,this._chart.gravity=a.Bottom,this.setMainLayout(this._chart),this._dataModel.allSeries.length>1?((s=new i.SeriesLegend("bar")).series=this._dataModel.allSeries,s.gravity=a.Bottom,s.layoutParams.margin.marginLeft=0,s.layoutParams.margin.marginTop=20,this.addLegend(s)):this._dataModel.series.length,null!=this._dataModel)for(var t=0,n=this._dataModel.scalePairs;t<n.length;t++){var o=n[t];if("color"==o.filed.name){var s=new i.ScaleLegend("color");s.scale=o.scale,s.layoutParams.width=200,s.layoutParams.height=30,s.gravity=a.Top,s.layoutParams.margin.marginLeft=100,s.layoutParams.margin.marginBottom=20,this.addLegend(s)}}},l.prototype.dispatchDraw=function(e){t.prototype.dispatchDraw.call(this,e);var i=this.layoutInfo.outterrect;e.drawRect(i.startPoint,i.endPoint,!1,this.background)},l.prototype.onMeasure=function(e,i,n){return t.prototype.onMeasure.call(this,e,i,n)},l.prototype.onLayout=function(e,i,n,a,r){t.prototype.onLayout.call(this,e,i,n,a,r)},l.prototype.addView=function(e,i){return t.prototype.addView.call(this,e,i),0},l}(e.BaseChartLayout);i.ChartLayout=l}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){var n=t.graphics.Rect,a=t.graphics.Util,r=function(t){function r(i,a){var r=t.call(this,i)||this;return r.__comparedAnimationCache=new e.ComparedAnimationCache,r._datamodel=a,r._layouts=[],r.__scalePairs=[],r._currentRect=new n(0,0,0,0),r}return __extends(r,t),r.prototype.scaleCallBack=function(t){var r=this;t.width*t.height<this.layoutInfo.innerrect.width*this.layoutInfo.innerrect.height/4?this._datamodel.chartType===e.ChartType.TreeMap&&setTimeout(function(){var t=new i.TreeMapLayout(r.layoutInfo.innerrect),o=r._currentRect;r._currentRect=new n(o.left-o.width/2,o.top-o.height/2,o.right+o.width/2,o.bottom+o.height/2),t.convert(r._datamodel.root,r._datamodel.encoding,r._currentRect,r._canvas);for(var s=[],l=0,c=t.shapeList;l<c.length;l++){var h=c[l];a.isMixed(h.layoutInfo.innerrect,r.layoutInfo.innerrect)&&s.push(h)}console.log("after shapelist size  "+s.length),r.removeAllViews();for(var u=0,_=s;u<_.length;u++){var p=_[u];r.addViewWithOutReLayout(p),p instanceof e.PlotShape&&null!=p.label&&r.addViewWithOutReLayout(p.label)}r.__comparedAnimationCache.startCompare(s)},100):t.width*t.height>this.layoutInfo.innerrect.width*this.layoutInfo.innerrect.height/4&&this._datamodel.chartType===e.ChartType.TreeMap&&setTimeout(function(){var t=new i.TreeMapLayout(r.layoutInfo.innerrect),o=r._currentRect;r._currentRect=new n(o.left+o.width/4,o.top+o.height/4,o.right-o.width/4,o.bottom-o.height/4),t.convert(r._datamodel.root,r._datamodel.encoding,r._currentRect,r._canvas);for(var s=[],l=0,c=t.shapeList;l<c.length;l++){var h=c[l];a.isMixed(h.layoutInfo.innerrect,r.layoutInfo.innerrect)&&s.push(h)}console.log("after shapelist size  "+s.length),r.removeAllViews();for(var u=0,_=s;u<_.length;u++){var p=_[u];r.addViewWithOutReLayout(p),p instanceof e.PlotShape&&null!=p.label&&r.addViewWithOutReLayout(p.label)}r.__comparedAnimationCache.startCompare(s)},100)},r.prototype.addViewWithOutReLayout=function(i,n,a){return i instanceof e.CubeShape&&(i.scaleCallBack=this.scaleCallBack.bind(this)),t.prototype.addViewWithOutReLayout.call(this,i,n,a)},r.prototype.onMeasure=function(e,i,n){return t.prototype.onMeasure.call(this,e,i,n)},r.prototype.onLayout=function(a,r,o,s,l){var c=this;if(t.prototype.onLayout.call(this,a,r,o,s,l),this.islayoutChanged){this.removeAllViews();var h=[];if(this.__scalePairs=[],this._layouts.length=0,this._datamodel.chartType==e.ChartType.Sunburst){var u=new i.SunburstLayout(0,2*Math.PI,0);this._currentRect=new n(a,r,o,s),u.convert(this._datamodel.root,this._datamodel.encoding,this._currentRect,l),h=u.shapeList}else if(this._datamodel.chartType==e.ChartType.TreeMap){var _=new i.TreeMapLayout(this.layoutInfo.innerrect);this._currentRect=new n(a,r,o,s),_.convert(this._datamodel.root,this._datamodel.encoding,this._currentRect,l),h=_.shapeList,console.log("before shape list size "+h.length),setTimeout(function(){c.__comparedAnimationCache.startCompare(h)})}for(var p=0,f=h;p<f.length;p++){var d=f[p];this.addViewWithOutReLayout(d),d instanceof e.PlotShape&&null!=d.label&&this.addViewWithOutReLayout(d.label)}}},r.prototype.beginChartAnimation=function(){for(var t=500/this.children.length,i=this,n=0;n<this.children.length;++n)!function(n){var a=i.children[n];if(a instanceof e.CubeShape)setTimeout(function(){var t=new e.CubeAnimation(null);t.duration=500,t.from=.2,t.to=1,t.fillAfter=!1,a.startAnimation(t)},t*n);else if(a instanceof e.SunburstShape){var r=new e.SweepAnimation;r.duration=1500,r.from=.2,r.to=1,r.fillAfter=!1,a.startAnimation(r)}}(n)},r.prototype.__merageScale=function(){},r.prototype.onDraw=function(e){t.prototype.onDraw.call(this,e)},r.prototype.dispatchDraw=function(e){e.save(),e.clip(this.layoutInfo.innerrect),t.prototype.dispatchDraw.call(this,e),e.restore()},Object.defineProperty(r.prototype,"layouts",{get:function(){return this._layouts},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scalePairs",{get:function(){return this.__scalePairs},enumerable:!0,configurable:!0}),r}(e.BasePlot);i.HierarchicalPlot=r}(e.hierarchical||(e.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.graphics.Size,a=t.view.LayoutParams,r=function(t){function r(e,i,n){var a=t.call(this,e)||this;return a._option=i,a._chartType=n,a}return __extends(r,t),Object.defineProperty(r.prototype,"option",{get:function(){return this._option},set:function(t){this._option=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"chartType",{get:function(){return this._chartType},set:function(t){null!=t&&t!=this._chartType&&(this._chartType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"datamodel",{get:function(){return this._dataModel},set:function(t){this._dataModel=t,this._loadView()},enumerable:!0,configurable:!0}),r.prototype._loadView=function(){var t=new i.HierarchicalPlot(this.getContext(),this.datamodel);t.layoutParams.width=a.MATCH_PARENT,t.layoutParams.height=a.MATCH_PARENT,this._plot=t,this.addView(t)},r.prototype.beginChartAnimation=function(){this.plot.beginChartAnimation()},r.prototype.onMeasure=function(i,a,r){for(var o=new n(0,0),s=0,l=this.children;s<l.length;s++){var c=l[s],h=new n(0,0);c instanceof e.BasePlot?(c.layoutParams.margin.marginLeft=0,c.layoutParams.margin.marginRight=0,c.layoutParams.margin.marginTop=0,c.layoutParams.margin.marginBottom=0,h=c.onMeasure(i,a,r)):h=c.onMeasure(i,a,r),h.width>o.width&&(o.width=h.width),h.height>o.height&&(o.height=h.height)}return t.prototype.onMeasure.call(this,i,a,r)},r.prototype.onLayout=function(t,e,i,n,a){this.layoutInfo.reset(t,e,i,n,this.padding,0),this.layoutItem(this.plot,t,e,i,n,a)},Object.defineProperty(r.prototype,"plot",{get:function(){for(var t=0,i=this.children;t<i.length;t++){var n=i[t];if(n instanceof e.BasePlot)return n}},enumerable:!0,configurable:!0}),r.prototype.dispatchDraw=function(e){t.prototype.dispatchDraw.call(this,e)},r}(t.widget.FrameLayout);i.HierarchicalChart=r}(e.hierarchical||(e.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){var n=t.graphics.Padding,a=t.graphics.Gravity,r=t.view.LayoutParams,o=t.graphics.RenderType,s=t.widget.RootView,l=t.graphics.Util,c=function(t){function s(e){var i=t.call(this,e)||this;i.clip=!1;return window.EventHandler=function(t,e,i){console.log(" "+t.toString()+", type "+e+" , info "+i)},i}return __extends(s,t),s.prototype.attachElement=function(e,i,a){t.prototype.attachElement.call(this,e,l.asEnum(i,o)),this.padding=new n(20),this._dataModel=a,this.setChart()},s.prototype.beginChartAnimation=function(){this._chart.beginChartAnimation()},s.prototype.setChart=function(){this.removeAllViews(),this._chart=new i.HierarchicalChart(null,null,e.ChartType.Bar),this._chart.layoutParams.width=r.MATCH_PARENT,this._chart.layoutParams.height=r.MATCH_PARENT,this._chart.datamodel=this._dataModel,this._chart.gravity=a.Center,this.addView(this._chart,0)},s.prototype.dispatchDraw=function(e){t.prototype.dispatchDraw.call(this,e);var i=this.layoutInfo.outterrect;e.drawRect(i.startPoint,i.endPoint,!1,this.background)},s.prototype.onMeasure=function(e,i,n){return t.prototype.onMeasure.call(this,e,i,n)},s.prototype.onLayout=function(e,i,n,a,r){t.prototype.onLayout.call(this,e,i,n,a,r)},s.prototype.addView=function(e,i){return t.prototype.addView.call(this,e,i),0},s}(s);i.ChartLayout=c}(e.hierarchical||(e.hierarchical={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){function t(){this.__xs=[],this.__ys=[],this.__ptlist=[]}return t.prototype.push=function(t){this.__ptlist.push(t),this.__xs.push(t.x),this.__ys.push(t.y)},t.prototype.pop=function(){return this.__xs.pop(),this.__ys.pop(),this.__ptlist.pop()},Object.defineProperty(t.prototype,"xs",{get:function(){return this.__xs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ys",{get:function(){return this.__ys},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"points",{get:function(){return this.__ptlist},enumerable:!0,configurable:!0}),t}();t.PointList=e;var i=function(){function t(){this._pointList=new e}return t.prototype.setProjection=function(t){this._projection=t},Object.defineProperty(t.prototype,"result",{get:function(){return this._pointList},enumerable:!0,configurable:!0}),t}();t.Stream=i;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parseStream=function(t){var e=null;if(null!=t&&t instanceof Array)for(var i=0,n=t;i<n.length;i++)for(var a=0,r=n[i];a<r.length;a++){var o=r[a];if(o instanceof Array&&2===o.length){var s=this._projection.lonLat2xy(o[0],o[1]);null!=s&&(this._pointList.push(s),null==e&&(e=s.clone()))}}},e}(i);t.AreaStream=n;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parseStream=function(t){if(null!=t&&t instanceof Array)for(var e=0,i=t;e<i.length;e++){var n=i[e];if(n instanceof Array&&2===n.length){var a=this._projection.lonLat2xy(n[0],n[1]);null!=a&&this._pointList.push(a)}}},e}(i);t.LineStream=a;var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.parseStream=function(t){if(null!=t&&t instanceof Array){var e=this._projection.lonLat2xy(t[0],t[1]);null!=e&&this._pointList.push(e)}},e}(i);t.PointStream=r}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){function t(){}return t.streamLine=function(t,e){},t.streamArea=function(t,e){},t}();t.StreamFactory=e}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(e){"use strict";var i,n=t.graphics.Util;!function(t){t[t.Point=0]="Point",t[t.MultiPoint=1]="MultiPoint",t[t.LineString=2]="LineString",t[t.MultiLineString=3]="MultiLineString",t[t.Polygon=4]="Polygon",t[t.MultiPolygon=5]="MultiPolygon",t[t.GeometryCollection=6]="GeometryCollection",t[t.Feature=7]="Feature",t[t.FeatureCollection=8]="FeatureCollection"}(i=e.GeoType||(e.GeoType={}));var a=function(){function t(){}return t.prototype.parseFeature=function(t){if(null!=this.projection){this.properties=t.properties;var e=t.geometry;if(this.parseName(this.properties),this.streams=[],null!=e){var a=n.asEnum(e.type,i,!0),r=e.coordinates;switch(a){case i.Point:this.streams.push(this._createPointStream(r));break;case i.MultiPoint:this.streams=this.streams.concat(this._createMultiPointStream(r));break;case i.LineString:this.streams.push(this._createLineStream(r));break;case i.MultiLineString:this.streams=this.streams.concat(this._createMultiLineStream(r));break;case i.Polygon:this.streams.push(this._createAreaStream(r));break;case i.MultiPolygon:this.streams=this.streams.concat(this._createMultiAreaStream(r))}}}},t.prototype.parseName=function(t){null!=t&&(this.name=t.name,null==this.name&&(this.name=t.NAME))},t.prototype._createPointStream=function(t){var i=new e.PointStream;return i.setProjection(this.projection),i.parseStream(t),i},t.prototype._createLineStream=function(t){var i=new e.LineStream;return i.setProjection(this.projection),i.parseStream(t),i},t.prototype._createAreaStream=function(t){var i=new e.AreaStream;return i.setProjection(this.projection),i.parseStream(t),i},t.prototype._createMultiPointStream=function(t){var e=[];if(null!=t&&t instanceof Array)for(var i=0,n=t;i<n.length;i++){var a=n[i];e.push(this._createPointStream(a))}return e},t.prototype._createMultiLineStream=function(t){var e=[];if(null!=t&&t instanceof Array)for(var i=0,n=t;i<n.length;i++){var a=n[i];e.push(this._createLineStream(a))}return e},t.prototype._createMultiAreaStream=function(t){var e=[];if(null!=t&&t instanceof Array)for(var i=0,n=t;i<n.length;i++){var a=n[i];e.push(this._createAreaStream(a))}return e},t}();e.Feature=a}(e.map||(e.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){return function(){}}();t.ParseFactory=e}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){return function(){}}();t.Projection=e}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(e){"use strict";var i=t.graphics.Point;e.EARTH_RADIUS=6378137,e.EQUATOR=2*e.EARTH_RADIUS*Math.PI;var n=function(t){function e(){var e=t.call(this)||this;return e.__centerlon=0,e.__centerlat=0,e.__xoffset=0,e.__yoffset=0,e._scale=1,null==e.__circumference&&(e.__circumference=1e3),e._scale=1,e}return __extends(e,t),e.prototype.begin=function(){this._max=0,this._min=0,this._maxy=0,this._miny=0;this.lonLat2xy(-180,-90),this.lonLat2xy(180,90)},e.prototype.end=function(){this._max=0,this._min=0,this._maxy=0,this._miny=0},Object.defineProperty(e.prototype,"maxx",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minx",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxy",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"miny",{get:function(){return this._min},enumerable:!0,configurable:!0}),e.prototype.scale=function(t){this._scale=t},e.prototype.rotate=function(t,e,i){this.__lambda=t,this.__phi=e,this.__gamma=i},e.prototype.translate=function(t,e){null==t||isNaN(t)||(this.__xoffset+=t),null==e||isNaN(e)||(this.__yoffset+=e)},e.prototype.center=function(t,e){this.__centerlon=t,this.__centerlat=e},e.prototype.xy2LonLat=function(t,e){var i=this.__circumference*this._scale,n={lon:0,lat:0},a=t/i*180,r=e/i*180;return r=180/Math.PI*(2*Math.atan(Math.exp(r*Math.PI/180))-Math.PI/2),n.lon=a,n.lat=r,n},e.prototype.lonLat2xy=function(t,n){var a=this.__circumference*this._scale;t-=this.__centerlon,n-=this.__centerlat;var r=null==this.__lambda||isNaN(this.__lambda)?0:this.__lambda,o=null==this.__phi||isNaN(this.__phi)?0:this.__phi,s=null==this.__gamma||isNaN(this.__gamma)?0:this.__gamma;if(t=r+t,n=o+n,!(Math.abs(n)>e.MAX_LAT)){var l=t*a/180,c=Math.log(Math.tan((90+n)*Math.PI/360))/(Math.PI/180);if(c=c*a/180,s>0){var h=(0==l?0:Math.atan(c/l))+s*Math.PI/180,u=Math.sqrt(l*l+c*c);l=Math.cos(h)*u,c=Math.sin(h)*u}var _=new i(l,c);return _.offset(this.__xoffset,this.__yoffset),_.offset(0,-a/2),_.y=-_.y,_}},e.prototype.refresh=function(){},e.MAX_LAT=85.05112877980659,e}(e.Projection);e.MercatorProjection=n}(e.map||(e.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){function t(){}return t.create=function(t){return void 0===t&&(t=null),null},t}();t.ProjectionFactory=e}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.graphics.Util,a=t.test.cartesian.Series,r=t.test.cartesian.Filter,o=t.test.cartesian.Encoding,s=t.graphics.Point,l=function(){function t(n){this.__chartTypes=[],t.id=0,this.__data=n,this.projection=new i.MercatorProjection,null!=n.config&&(this.__config=new e.Config(n.config),null!=this.__config.center&&this.projection.center(this.__config.center.x,this.__config.center.y),null!=this.__config.translate&&this.projection.translate(this.__config.translate.x,this.__config.translate.y),null!=this.__config.scale&&this.projection.scale(this.__config.scale)),this.__encoding=this._analyseEncoding(this.__data.encoding),this._analyseFilter(n.filter),this.refresh()}return Object.defineProperty(t.prototype,"config",{get:function(){return this.__config},enumerable:!0,configurable:!0}),t.prototype._analyseEncoding=function(t){return new o(t)},t.prototype.refresh=function(){t.id=0,this.__analyseGeoData(this.__data.geo),this._analyseSeries(this.__data.series,this.__encoding),this._createLayoutScales(this.__encoding)},Object.defineProperty(t.prototype,"chartTypes",{get:function(){return this.__chartTypes},enumerable:!0,configurable:!0}),t.prototype._analyseSeries=function(t,e){this.__series=[],this.__allSeries=[];for(var i=0;i<t.length;++i){var n=t[i],r=new a(e,n,i);null!=this.__filter&&this.__filter.series.indexOf(n.name)>-1?(r.enable=!0,this.__series.push(r),this.__chartTypes.indexOf(r.chartType)<0&&this.__chartTypes.push(r.chartType)):r.enable=!1,this.__allSeries.push(r)}},t.prototype._analyseFilter=function(t){null!=t&&null!=t.series&&null!=t.rules&&(this.__filter=new r(t.series,t.rules))},t.prototype.__analyseGeoData=function(e){this.projection.begin();var a=n.asEnum(e.type,i.GeoType,!0);if(this.featureList=[],a==i.GeoType.FeatureCollection){var r=e.features;if(null!=r&&r instanceof Array)for(var o=0,s=r;o<s.length;o++){var l=s[o],c=new i.Feature;c.id=(++t.id).toFixed(),null!=this.projection&&(c.projection=this.projection),c.parseFeature(l),this.featureList.push(c)}}this.projection.end()},t.prototype._createLayoutScales=function(t){var i=this;if(this.__scalePairs=[],this.__series.length>1){for(var n=0;n<this.__series.length-1;++n)for(var a=this.__series[n],r=this.__series[n+1],o=0,l=a.scalePairs;o<l.length;o++)for(var c=l[o],h=0,u=r.scalePairs;h<u.length;h++){var _=u[h];if(c.filed.equals(_.filed)){var p=c.filed,f=this.__getScaleInfobyname(c.filed.name,a.name),d=this.__getScaleInfobyname(_.filed.name,r.name);null==f&&null==d?null!=(S=e.Utility.mergeScale(c.scale,_.scale,!0))?this.__scalePairs.push({series:[a.name,r.name],filed:p,scale:S}):(this.__scalePairs.push({series:[a.name],filed:c.filed,scale:c.scale}),this.__scalePairs.push({series:[r.name],filed:_.filed,scale:_.scale})):null==f&&null!=d?null!=(S=e.Utility.mergeScale(c.scale,d.scale,!0))&&(d.scale=S,d.series.push(a.name)):null!=f&&null==d&&null!=(S=e.Utility.mergeScale(_.scale,f.scale,!0))&&(f.scale=S,f.series.push(r.name))}}for(var y=0,g=this.__series;y<g.length;y++)for(var m=g[y],v=0,b=m.scalePairs;v<b.length;v++){var w=b[v],S=this._getScaleByName(w.filed.name,m.name);null!=S&&(w.scale=S)}}else if(1==this.__series.length)for(var x=0,P=this.__series[0].scalePairs;x<P.length;x++){w=P[x];this.__scalePairs.push({series:[this.__series[0].name],filed:w.filed,scale:w.scale.clone()})}var T=this.nameScale;null!=T&&null!=T.domains&&T.domains.map(function(t){return t instanceof s?i.projection.lonLat2xy(t.x,t.y):t})},Object.defineProperty(t.prototype,"nameScale",{get:function(){var t=_.result(_.find(this.__scalePairs,function(t){return"geoposition"==t.filed.name}),"scale");return t instanceof i.MapOrdinalScale?t:null},enumerable:!0,configurable:!0}),t.prototype.__getScaleInfobyname=function(t,e){return _.find(this.__scalePairs,function(i){return i.series.indexOf(e)>=0&&t==i.filed.name})},t.prototype._getScaleByName=function(t,e){return _.result(_.find(this.__scalePairs,function(i){return i.series.indexOf(e)>=0&&t==i.filed.name}),"scale")},t.prototype.getSeriesByType=function(t){return _.filter(this.__series,function(e){return e.chartType===t})},Object.defineProperty(t.prototype,"series",{get:function(){return this.__series},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allSeries",{get:function(){return this.__allSeries},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encoding",{get:function(){return this.__encoding},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filter",{get:function(){return this.__filter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scalePairs",{get:function(){return this.__scalePairs},enumerable:!0,configurable:!0}),t.id=0,t}();i.DataModel=l}(e.map||(e.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(e){!function(e){"use strict";var i=t.test.cartesian.Field,n=function(){return function(t){if(t.color&&(this.color=new i(t.color,"color")),t.tooltip&&(this.tooltip=new i(t.tooltip,"tooltip")),t.text&&(this.text=new i(t.text,"text")),t.values&&t.values instanceof Array){this.values=[];for(var e=0;e<t.values.length;++e){var n=t.values[e];this.values.push(new i(n,n.name))}}}}();e.Encoding=n}(e.relation||(e.relation={}))}(e.map||(e.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){!function(n){"use strict";var a=t.graphics.Util,r=t.test.map.relation.Encoding,o=function(){return function(){}}();n.Item=o;var s=function(){function t(n){this.__chartTypes=[],this._points=[],t.id=0,this.__data=n,this.projection=new i.MercatorProjection,null!=n.config&&(this.__config=new e.Config(n.config),null!=this.__config.center&&this.projection.center(this.__config.center.x,this.__config.center.y),null!=this.__config.translate&&this.projection.translate(this.__config.translate.x,this.__config.translate.y),null!=this.__config.scale&&this.projection.scale(this.__config.scale)),this.__encoding=this._analyseEncoding(this.__data.encoding),this.refresh()}return Object.defineProperty(t.prototype,"points",{get:function(){return this._points},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.__config},enumerable:!0,configurable:!0}),t.prototype._analysePathValue=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e],a=new o;a.start=this.projection.lonLat2xy(n.start.longitude,n.start.latitude),a.end=this.projection.lonLat2xy(n.end.longitude,n.end.latitude),a.value=n,this._points.push(a)}},t.prototype._analyseEncoding=function(t){return new r(t)},t.prototype.refresh=function(){t.id=0,this.projection.begin(),this.__analyseGeoData(this.__data.geo),this._analysePathValue(this.__data.values),this.projection.end()},Object.defineProperty(t.prototype,"chartTypes",{get:function(){return this.__chartTypes},enumerable:!0,configurable:!0}),t.prototype.__analyseGeoData=function(e){var n=a.asEnum(e.type,i.GeoType,!0);if(this.featureList=[],n==i.GeoType.FeatureCollection){var r=e.features;if(null!=r&&r instanceof Array)for(var o=0,s=r;o<s.length;o++){var l=s[o],c=new i.Feature;c.id=(++t.id).toFixed(),null!=this.projection&&(c.projection=this.projection),c.parseFeature(l),this.featureList.push(c)}}},Object.defineProperty(t.prototype,"encoding",{get:function(){return this.__encoding},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scalePairs",{get:function(){return this.__scalePairs},enumerable:!0,configurable:!0}),t.id=0,t}();n.DataModel=s}(i.relation||(i.relation={}))}(e.map||(e.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(t){"use strict";var e=function(){function t(t){this.__airportsFields=_.cloneDeep(t.airportsFields),this.__airlinesFields=_.cloneDeep(t.airlineFields),this.__airports=_.cloneDeep(t.airports),this.__airlines=_.cloneDeep(t.airlines),this.__routes=_.cloneDeep(t.routes),this._analyse()}return Object.defineProperty(t.prototype,"data",{get:function(){return this.__data},enumerable:!0,configurable:!0}),t.prototype._analyse=function(){var t=this,e=this.__airlines.map(function(e){for(var i={},n=0;n<e.length;++n)i[t.__airlinesFields[n]]=e[n];return i}),i=this.__airports.map(function(e){for(var i={},n=0;n<e.length;++n)i[t.__airportsFields[n]]=e[n];return i});this.__data=this.__routes.map(function(t){var n={start:{},end:{}},a=e[t[0]],r=i[t[1]],o=i[t[2]];for(var s in a)n.start[s]=a[s],n.end[s]=a[s];for(var s in r)n.start[s]=r[s];for(var s in o)n.end[s]=o[s];return n})},t}();t.FlightParser=e}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=t.view.event.MotionEvent,r=t.graphics.Point,o=t.graphics.Rect,s=function(t){function s(e){var i=t.call(this,e)||this;return i._layouts=[],i.__shapeList=[],i._ofx=0,i._ofy=0,i._style=n.style,i._style.background="#333",i}return __extends(s,t),Object.defineProperty(s.prototype,"datamodel",{get:function(){return this._dataModel},set:function(t){this._dataModel=t},enumerable:!0,configurable:!0}),s.prototype.onMouseEvent=function(t){switch(t.action){case a.ACTION_MOUSE_DOWN:return this._startPt=new r(t.x,t.y),!0;case a.ACTION_MOUSE_UP:case a.ACTION_CANCEL:case a.ACTION_MOUSE_OUT:return this._startPt=null,!0;case a.ACTION_MOUSE_MOVE:if(null!=this._startPt){var e=t.x-this._startPt.x,n=this._startPt.y-t.y;return this._startPt.x=t.x,this._startPt.y=t.y,null==this.datamodel.projection&&(this.datamodel.projection=new i.MercatorProjection),console.log("ofx "+e+" , ofy "+n),this.datamodel.projection.translate(e,n),this.datamodel.refresh(),this.requestLayout(),!0}}return!1},s.prototype.onInterceptMouseEvent=function(t){return!0},s.prototype.beginChartAnimation=function(){for(var t=500/this.children.length,i=this,n=0;n<this.children.length;++n)!function(n){var a=i.children[n],r=new e.FlightAnimationTo;r.duration=1e3*Math.random()+1500,r.from=0,r.to=1,r.repeate=!0,setTimeout(function(){a instanceof e.FlightShape&&a.startAnimation(r)},t*n)}(n)},s.prototype.onLayout=function(n,a,r,s,l){if(t.prototype.onLayout.call(this,n,a,r,s,l),this.islayoutChanged){this.removeAllViews(),this.__shapeList=[],this._layouts=[];var c=new i.GeoLayout;c.convert(this._dataModel.featureList,new o(n,a,r,s),l),this.__shapeList=this.__shapeList.concat(c.shapeList);var h=null;if(this.datamodel instanceof i.DataModel&&(h=this.datamodel.nameScale),null==h&&(h=c.nameScale),this._dataModel instanceof i.DataModel)for(var u=0,_=this._dataModel.chartTypes;u<_.length;u++)switch(_[u]){case e.ChartType.Scatter:var p=new i.MapScatterLayout;p.convert(this._dataModel.getSeriesByType(e.ChartType.Scatter),this._dataModel.projection,h,this._dataModel.encoding,new o(n,a,r,s),l),this.__shapeList=this.__shapeList.concat(p.shapeList),this._layouts.push(p)}else if(this._dataModel instanceof i.relation.DataModel){var f=new i.relation.MapRelationLayout;f.convert(this._dataModel.points,new o(n,a,r,s),l),this.__shapeList=this.__shapeList.concat(f.shapeList),this._layouts.push(f)}for(var d=0,y=this.__shapeList;d<y.length;d++){var g=y[d];this.addViewWithOutReLayout(g),g instanceof e.PlotShape&&null!=g.label&&this.addViewWithOutReLayout(g.label)}}},s.prototype.onDraw=function(e){t.prototype.onDraw.call(this,e)},s}(e.BasePlot);i.GeoPlot=s}(e.map||(e.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(e){var i=t.graphics.Padding,n=t.graphics.Gravity,a=t.view.LayoutParams,r=t.graphics.RenderType,o=t.widget.RootView,s=t.graphics.Util,l=function(t){function o(e){var i=t.call(this,e)||this;i.clip=!1;return window.EventHandler=function(t,e,i){console.log(" "+t.toString()+", type "+e+" , info "+i)},i.background.background="#333",i}return __extends(o,t),o.prototype.attachElement=function(e,n,a){t.prototype.attachElement.call(this,e,s.asEnum(n,r)),this.padding=new i(20),this._dataModel=a,this.setChart()},o.prototype.beginChartAnimation=function(){this._chart.beginChartAnimation()},o.prototype.setChart=function(){this.removeAllViews(),this._chart=new e.GeoPlot(null),this._chart.layoutParams.width=a.MATCH_PARENT,this._chart.layoutParams.height=a.MATCH_PARENT,this._chart.datamodel=this._dataModel,this._chart.gravity=n.Center,this.addView(this._chart,0)},o.prototype.dispatchDraw=function(e){var i=this.layoutInfo.outterrect;e.drawRect(i.startPoint,i.endPoint,!0,this.background),t.prototype.dispatchDraw.call(this,e)},o.prototype.onMeasure=function(e,i,n){return t.prototype.onMeasure.call(this,e,i,n)},o.prototype.onLayout=function(e,i,n,a,r){t.prototype.onLayout.call(this,e,i,n,a,r)},o.prototype.addView=function(e,i){return t.prototype.addView.call(this,e,i),0},o}(o);e.ChartLayout=l}(e.map||(e.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.graphics.Point,n=function(){return function(t){var e=t.geo;null!=e&&(null!=e.center&&(this.center=new i(e.center[0],e.center[1])),null!=e.translate&&(this.translate=new i(e.translate[0],e.translate[1])),e.scale&&(this.scale=e.scale))}}();e.Config=n}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){var e=function(){return function(){}}();t.EventHandler=e}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(e){"use strict";var i=function(){function e(t){this.__agg=t}return e.prototype.put=function(t,e){null==this.__domains[t]&&(this.__domains[t]=[]),this.__domains[t].push(e)},e.prototype.get=function(e){var i=this.__domains[e];if(null!=i){for(var n=0,a=0,r=0,o=i;r<o.length;r++){var s=o[r];"number"==typeof s&&(a+=s,n++)}switch(this.__agg){case t.Agg.AVERAGE:return a/n;case t.Agg.COUNT:return n;case t.Agg.SUM:return a;case t.Agg.NONE:return i[0]}}return 0},e}();e.AggregateCache=i}(t.cartesian||(t.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){"use strict"}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.view.View,a=t.graphics.Rect,r=t.graphics.Style,o=t.device.Default,s=t.graphics.LinearGradient,l=t.graphics.FillStyle,c=function(t){function i(e){var i=t.call(this,null)||this;return i.__type=null,i.__type=e,i}return __extends(i,t),Object.defineProperty(i.prototype,"scale",{get:function(){return this.__scale},set:function(t){this.__scale=t},enumerable:!0,configurable:!0}),i.prototype.onMeasure=function(e,i,n){return t.prototype.onMeasure.call(this,e,i,n)},i.prototype.onLayout=function(e,i,n,a,r){t.prototype.onLayout.call(this,e,i,n,a,r)},i.prototype.onDraw=function(e){t.prototype.onDraw.call(this,e),"value"==this.__type||"color"==this.__type&&this._drawColorScale(e)},i.prototype._drawColorScale=function(t){var i=this.__scale;if(i instanceof e.OrdinalScale)for(var n=null,c=(n=null==i.startPosition||null==i.endPosition?i.ranges:e.ColorUtils.gradientColor(i.startPosition,i.endPosition,i.domains.length)).length,h=this.layoutInfo.innerrect.width/c,u=this.layoutInfo.innerrect.left,_=this.layoutInfo.innerrect.top,p=this.layoutInfo.innerrect.height,f=o.style,d=0,y=n;d<y.length;d++){var g=y[d],m=new a(u,_,u+h,_+p);f.background=g,t.drawRect(m.startPoint,m.endPoint,!0,f),u+=h}else if(i instanceof e.LinearScale){var v=this.layoutInfo.innerrect.left+this.layoutInfo.innerrect.width/2,b=this.layoutInfo.innerrect.top,w=b,S=this.layoutInfo.innerrect.bottom,x=new s(v,b,w,S,[{offset:0,color:i.startPosition},{offset:1,color:i.endPosition}]),P=new l;P.fill=x;f=new r(P,null);t.drawRect(this.layoutInfo.innerrect.startPoint,this.layoutInfo.innerrect.endPoint,!0,f)}},i}(n);i.ScaleLegend=c}(e.cartesian||(e.cartesian={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=t.view.animation.Animation,a=function(t){function n(n,a,r,o){var s=t.call(this)||this;s.priority=++e.LinesShape.LinesPrority,s.__xs=n,s.__ys=a;var l=e.Utility.min(n),c=e.Utility.min(a),h=e.Utility.max(n),u=e.Utility.max(a);return s.__renderXs=[],s.__renderYs=[],s.layoutInfo.reset(l,c,h,u,s.padding,0),s._oldLayoutInfo=s.layoutInfo.clone(),s._style=r,null==r&&(s._style=i.style),s._strokeStyle=o,null==o&&(s._strokeStyle=i.strokestyle),s}return __extends(n,t),Object.defineProperty(n.prototype,"xs",{get:function(){return this.__xs},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ys",{get:function(){return this.__ys},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"renderXs",{set:function(t){this.__renderXs=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"renderYs",{set:function(t){this.__renderYs=t},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"strokeStyle",{get:function(){return this._strokeStyle},set:function(t){this._strokeStyle=t},enumerable:!0,configurable:!0}),n.prototype.onDraw=function(t){t.drawLines(this.__renderXs,this.__renderYs,this._strokeStyle)},n.LinesPrority=4*e.PlotShape.PRIORITY,n}(e.PlotShape);e.FlightShape=a;var r=function(e){function i(){var i=e.call(this)||this;return i.ease=new t.view.animation.AnimationEase,i}return __extends(i,e),i.prototype.applyTransformation=function(t,e,i){if(i instanceof a){var n=i.xs,r=i.ys,o=n.length-1,s=[(n[o]-n[0])*t+n[0],(n[o]-n[0])*(t+.1)+n[0]],l=[(r[o]-r[0])*t+r[0],(r[o]-r[0])*(t+.1)+r[0]];i.renderXs=s,i.renderYs=l}},i.prototype.onStartAniamtion=function(t,i){e.prototype.onStartAniamtion.call(this,t,i)},i.prototype.onEndAnimation=function(t,i){e.prototype.onEndAnimation.call(this,t,i)},i}(n);e.FlightAnimationTo=r;var o=function(e){function i(){var i=e.call(this)||this;return i.ease=new t.view.animation.AnimationEase,i}return __extends(i,e),i.prototype.applyTransformation=function(t,e,i){if(i instanceof a){var n=i.xs,r=i.ys,o=n.length-1,s=[n[o]-(n[o]-n[0])*t,n[o]-(n[o]-n[0])*(t+.1)],l=[r[o]-(r[o]-r[0])*t,r[o]-(r[o]-r[0])*(t+.1)];i.renderXs=s,i.renderYs=l}},i.prototype.onStartAniamtion=function(t,i){e.prototype.onStartAniamtion.call(this,t,i)},i.prototype.onEndAnimation=function(t,i){e.prototype.onEndAnimation.call(this,t,i)},i}(n);e.FlightAnimationBack=o}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=t.device.Default,n=t.view.event.MotionEvent,a=function(t){function a(n,a,r,o){var s=t.call(this)||this;s.priority=e.Shape.PRIORITY+1,s.__xs=n,s.__ys=a,s._style=r;var l=Math.min.apply(Math,n),c=Math.min.apply(Math,a),h=Math.max.apply(Math,n),u=Math.max.apply(Math,a);return s.layoutInfo.reset(l,c,h,u,s.padding,0),s._oldLayoutInfo=s.layoutInfo.clone(),s.__center=e.Utility.CenterOfPolygon(s.__xs,s.__ys),s.__area=e.Utility.Area(s.__xs,s.__ys),null==r&&(s._style=i.style),s._strokeStyle=o,null==o&&(s._strokeStyle=i.strokestyle),s}return __extends(a,t),Object.defineProperty(a.prototype,"center",{get:function(){return this.__center},set:function(t){this.__center=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"area",{get:function(){return this.__area},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"strokeStyle",{get:function(){return this._strokeStyle},set:function(t){this._strokeStyle=t},enumerable:!0,configurable:!0}),a.prototype.onDraw=function(t){t.save(),t.clip(this.layoutInfo.innerrect),t.drawPolygon(this.__xs,this.__ys,this.style),t.restore()},a.prototype.onMouseEvent=function(t){switch(t.action){case n.ACTION_MOUSE_ON:console.log("mouse on ");break;case n.ACTION_MOUSE_OUT:console.log("mouse out ");break;case n.ACTION_MOUSE_MOVE:case n.ACTION_MOUSE_OUT:}return!0},a}(e.PlotShape);e.MapItemShape=a}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){"use strict";var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onDraw=function(t){},e}(t.widget.TextView);e.ToolTips=i}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(e){"use strict";var i=function(i){function n(){var t=i.call(this)||this;return t.__namescale=new e.MapOrdinalScale("name"),t}return __extends(n,i),n.prototype.convert=function(e,i,n){this.__shapelist.length=0;for(var a=0,r=e;a<r.length;a++){for(var o=r[a],s=null,l=0,c=o.streams;l<c.length;l++){var h=c[l].result,u=new t.MapItemShape(h.xs,h.ys);null==s&&(s=u),s.area<u.area&&(s=u),u.style.background="#000",u.style.strokeStyle.strokeWidth=1,this.shapeList.push(u)}null!=s&&(this.__namescale.domains.push(o.name),this.__namescale.ranges.push(s.center))}return this.__namescale.refresh(),this.shapeList},Object.defineProperty(n.prototype,"nameScale",{get:function(){return this.__namescale},enumerable:!0,configurable:!0}),n}(t.BaseLayout);e.GeoLayout=i}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(e){"use strict";var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._rect=null,e}return __extends(e,t),e.prototype.convert=function(t,e,i,n,a,r){this.__shapelist=[],this._serieslist=[],this._projection=e,this._nameScale=i;for(var o=0,s=t;o<s.length;o++){h=s[o];this._serieslist.push(h.clone())}this._encoding=n,this._rect=a;for(var l=0,c=this._serieslist;l<c.length;l++){var h=c[l];this._layoutSeries(h,i,r)}return this.__shapelist},e.prototype._layoutSeries=function(t,e,i){},e}(t.BaseLayout);e.MapBaseLayout=i}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(t){!function(e){"use strict";var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.getScaleValue=function(t){var e=this._domainCache[t];return isNaN(e)&&(e=0),this.__ranges[e]},Object.defineProperty(e.prototype,"ranges",{get:function(){return this.__ranges},enumerable:!0,configurable:!0}),e}(t.OrdinalScale);e.MapOrdinalScale=i}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));!function(t){!function(e){!function(i){"use strict";var n=t.device.Default,a=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype._layoutSeries=function(t,i,a){this._serieslist.length,t.getScale("x"),t.getScale("y");var r=t.getScale("color"),o=t.getScale("size"),s=e.ColorUtils.indexColor(t.index),l=[];r instanceof e.OrdinalScale&&(r=r.clone(),l=e.ColorUtils.gradientColor(r.startPosition,r.endPosition,r.domains.length),r.range([0,r.domains.length-1]));for(var c=0,h=t.points;c<h.length;c++){var u=h[c];if(null!=u){var _=u.color,p=(u.shape,u.size),f=(u.tooltip,u.text),d=(u.geoposition,null);d=u.geoposition.scaleType===e.ScaleType.LatLon?this._projection.lonLat2xy(u.geoposition.value[0],u.geoposition.value[1]):i.getScaleValue(u.geoposition.value);var y=o.getScaleValue(p.value);(isNaN(y)||null==y||y<=0)&&(y=10);var g=s;r instanceof e.OrdinalScale?g=l[r.getScaleValue(_.value)]:r instanceof e.LinearScale&&(g=e.ColorUtils.getColor(r.startPosition,r.endPosition,_.value,r.min,r.max));var m=new e.ScatterShape(d.x-y/2,d.y-y/2,y,y,n.style);if(m.style.background=null!=g?g:s,t.showlabels&&null!=f){var v=f.value,b=n.font;b.fontColor="black",b.fontSize=12;var w=a.measureString(v,b),S=w.width,x=w.height;m.label=new e.Label(v,d.x,d.y-y/2-3,S,x,0,3),m.label.background=n.style,m.label._font=b,m.label.background.strokeStyle.strokeColor="gray",m.label.background.background="lightblue"}this.__shapelist.push(m)}}},i}(i.MapBaseLayout);i.MapScatterLayout=a}(e.map||(e.map={}))}(t.test||(t.test={}))}(android||(android={}));var android;!function(t){!function(t){!function(e){!function(e){"use strict";var i=function(e){function i(){return e.call(this)||this}return __extends(i,e),i.prototype.convert=function(e,i,n){this.__shapelist.length=0;for(var a=0,r=e;a<r.length;a++){var o=r[a],s=new t.FlightShape([o.start.x,o.end.x],[o.start.y,o.end.y]);s.strokeStyle.strokeColor="red",s.strokeStyle.strokeWidth=.5,this.shapeList.push(s)}return this.shapeList},i}(t.BaseLayout);e.MapRelationLayout=i}(e.relation||(e.relation={}))}(t.map||(t.map={}))}(t.test||(t.test={}))}(android||(android={}));